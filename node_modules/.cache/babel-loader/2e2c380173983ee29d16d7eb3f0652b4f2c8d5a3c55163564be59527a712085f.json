{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\9204r\\\\.cursor\\\\avatar\\\\src\\\\components\\\\NewGameHost.tsx\",\n  _s = $RefreshSig$();\n/**\n * 새로운 모듈 기반 게임 진행 페이지\n * 실시간 동기화와 참여자 현황 관리\n */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNewGameContext } from '../contexts/NewGameContext';\nimport eventBus from '../services/EventBus';\nimport syncManager from '../services/SyncManager';\nimport Avatar from 'avataaars2';\nimport './GameHost.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NewGameHost = () => {\n  _s();\n  const [timeLeft, setTimeLeft] = useState(0);\n  const [showAnswer, setShowAnswer] = useState(false);\n  const [eliminateMode, setEliminateMode] = useState(false);\n  const [reviveMode, setReviveMode] = useState(false);\n  const [countdownActive, setCountdownActive] = useState(false);\n  const {\n    state,\n    actions\n  } = useNewGameContext();\n  const {\n    room,\n    questions,\n    players,\n    gameState,\n    currentQuestionIndex,\n    gameSettings,\n    phaseStartedAt,\n    phaseDuration,\n    paused\n  } = state;\n  const mountedAtRef = useRef(Date.now());\n  const currentQuestion = gameState === 'playing' || gameState === 'showingAnswer' || gameState === 'paused' ? questions[currentQuestionIndex] || null : null;\n  const getBackgroundColor = colorName => {\n    const colorMap = {\n      Black: '#262e33',\n      Brown: '#8B4513',\n      Red: '#C93305',\n      Blue01: '#65C9FF',\n      Blue02: '#5199E4',\n      Blue03: '#25557C',\n      Gray01: '#E6E6E6',\n      Gray02: '#929598',\n      Heather: '#3C4F5C',\n      PastelBlue: '#B1E2FF',\n      PastelGreen: '#A7FFC4',\n      PastelOrange: '#FFDEB5',\n      PastelRed: '#FFAFB9',\n      PastelYellow: '#FFFFB1',\n      Pink: '#FF488E',\n      White: '#FFFFFF'\n    };\n    return colorMap[colorName] || '#B1E2FF';\n  };\n  useEffect(() => {\n    // 이벤트 리스너 등록\n    const unsubscribers = [eventBus.on('GAME_STATE_CHANGE', handleGameStateChange), eventBus.on('NEXT_QUESTION', handleNextQuestion), eventBus.on('ANSWER_SHOWN', handleAnswerShown), eventBus.on('PLAYER_JOIN', handlePlayerJoin), eventBus.on('PLAYER_LEAVE', handlePlayerLeave), eventBus.on('ANSWER_SUBMITTED', handleAnswerSubmitted)];\n    return () => {\n      unsubscribers.forEach(unsub => unsub());\n    };\n  }, []);\n  useEffect(() => {\n    // 단계 전환 시 타이머 초기화\n    if (gameState === 'playing' && currentQuestion) {\n      setTimeLeft(gameSettings.timeLimit);\n      setShowAnswer(false);\n      setCountdownActive(true);\n    } else if (gameState === 'showingAnswer') {\n      setTimeLeft(gameSettings.answerRevealTime);\n      setShowAnswer(true);\n      setCountdownActive(true);\n    } else {\n      setCountdownActive(false);\n    }\n  }, [gameState, currentQuestion, gameSettings.answerRevealTime]);\n  useEffect(() => {\n    // 서버/브로드캐스트 기준 남은 시간 계산\n    if ((gameState === 'playing' || gameState === 'showingAnswer') && phaseStartedAt && phaseDuration && !paused) {\n      const elapsed = Math.floor((Date.now() - phaseStartedAt) / 1000);\n      const remain = Math.max(0, (phaseDuration || 0) - elapsed);\n      setTimeLeft(remain);\n      setCountdownActive(true);\n    }\n  }, [gameState, phaseStartedAt, phaseDuration, paused]);\n  useEffect(() => {\n    if (!countdownActive) return;\n    if (!(gameState === 'playing' || gameState === 'showingAnswer')) return;\n    if (paused) return;\n    const timer = setInterval(() => {\n      setTimeLeft(prev => {\n        const next = Math.max(0, prev - 1);\n        return next;\n      });\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [countdownActive, gameState, paused]);\n  useEffect(() => {\n    if (!(gameState === 'playing' || gameState === 'showingAnswer')) return;\n    if (timeLeft > 0) return;\n    // 새로 열린 진행페이지에서 즉시 단계 전환되는 현상 방지: 마운트 후 짧은 유예\n    const mountedForMs = Date.now() - mountedAtRef.current;\n    if (mountedForMs < 1500) return;\n    // 실제 만료 검증(서버 기준 시간) 후에만 자동 전환\n    const expired = !!(phaseStartedAt && phaseDuration && (Date.now() - phaseStartedAt) / 1000 >= phaseDuration);\n    if (!expired) return;\n    setCountdownActive(false);\n    if (gameState === 'playing') {\n      if (gameSettings.autoMode) {\n        setTimeout(() => actions.showAnswer(), 150);\n      }\n    } else if (gameState === 'showingAnswer') {\n      if (gameSettings.autoMode) {\n        setTimeout(() => actions.nextQuestion(), 200);\n      }\n    }\n  }, [timeLeft, gameState, gameSettings.autoMode, actions, phaseStartedAt, phaseDuration]);\n\n  // 시간 조정 이벤트\n  useEffect(() => {\n    const unsub = eventBus.on('ADJUST_TIME', delta => {\n      setTimeLeft(prev => Math.max(0, prev + (Number(delta) || 0)));\n    });\n    return () => unsub();\n  }, []);\n\n  // 탭 간 시간 조정 동기화\n  useEffect(() => {\n    var _addEventListener, _ref;\n    const handler = delta => {\n      setTimeLeft(prev => Math.max(0, prev + (Number(delta) || 0)));\n    };\n    (_addEventListener = (_ref = syncManager).addEventListener) === null || _addEventListener === void 0 ? void 0 : _addEventListener.call(_ref, 'ADJUST_TIME', handler);\n    return () => {\n      try {\n        var _removeEventListener, _ref2;\n        (_removeEventListener = (_ref2 = syncManager).removeEventListener) === null || _removeEventListener === void 0 ? void 0 : _removeEventListener.call(_ref2, 'ADJUST_TIME', handler);\n      } catch {}\n    };\n  }, []);\n  const handleGameStateChange = data => {\n    console.log('🎮 게임 상태 변경:', data);\n  };\n  const handleNextQuestion = data => {\n    console.log('➡️ 다음 문제:', data);\n    setShowAnswer(false);\n  };\n  const handleAnswerShown = data => {\n    console.log('💡 정답 공개:', data);\n    setShowAnswer(true);\n  };\n  const handlePlayerJoin = player => {\n    console.log('👤 새 참여자:', player.nickname);\n  };\n  const handlePlayerLeave = playerId => {\n    console.log('👤 참여자 퇴장:', playerId);\n  };\n  const handleAnswerSubmitted = data => {\n    console.log('📝 답안 제출:', data);\n  };\n  const handlePlayerClick = playerId => {\n    if (eliminateMode) {\n      actions.eliminatePlayer(playerId);\n      setEliminateMode(false);\n      document.body.style.cursor = 'default';\n    } else if (reviveMode) {\n      actions.revivePlayer(playerId);\n      setReviveMode(false);\n      document.body.style.cursor = 'default';\n    }\n  };\n  const handleEliminateMode = () => {\n    setEliminateMode(true);\n    setReviveMode(false);\n    document.body.style.cursor = 'url(\"data:image/svg+xml,<svg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'24\\' height=\\'24\\' viewBox=\\'0 0 24 24\\'><text y=\\'18\\' font-size=\\'18\\'>❌</text></svg>\") 12 12, auto';\n  };\n  const handleReviveMode = () => {\n    setReviveMode(true);\n    setEliminateMode(false);\n    document.body.style.cursor = 'url(\"data:image/svg+xml,<svg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'24\\' height=\\'24\\' viewBox=\\'0 0 24 24\\'><text y=\\'18\\' font-size=\\'18\\'>✅</text></svg>\") 12 12, auto';\n  };\n  const cancelMode = () => {\n    setEliminateMode(false);\n    setReviveMode(false);\n    document.body.style.cursor = 'default';\n  };\n  const sortPlayers = players => {\n    return [...players].sort((a, b) => {\n      // 탈락자를 뒤로\n      if (a.isEliminated !== b.isEliminated) {\n        return a.isEliminated ? 1 : -1;\n      }\n      // 점수 순으로 정렬\n      return b.score - a.score;\n    });\n  };\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n  if (!room) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-host loading\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uAC8C\\uC784 \\uB370\\uC774\\uD130\\uB97C \\uBD88\\uB7EC\\uC624\\uB294 \\uC911...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\uC7A0\\uC2DC\\uB9CC \\uAE30\\uB2E4\\uB824\\uC8FC\\uC138\\uC694.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game-host\",\n    children: [(gameState === 'playing' || gameState === 'paused' || gameState === 'showingAnswer') && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-timer\",\n      style: {\n        position: 'fixed',\n        top: 12,\n        right: 12\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `timer ${timeLeft <= 5 ? 'warning' : ''}`,\n        children: [\"\\u23F1\\uFE0F \", formatTime(timeLeft)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"game-main\",\n      children: currentQuestion ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"question-display\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"question-header\",\n          style: {\n            marginBottom: 20,\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"question-info\",\n            style: {\n              display: 'flex',\n              gap: 12,\n              alignItems: 'center',\n              flexWrap: 'wrap'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"question-number\",\n              children: [\"\\uBB38\\uC81C \", currentQuestionIndex + 1, \"/\", questions.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"question-score\",\n              children: [\"\\uBC30\\uC810: \", currentQuestion.score, \"\\uC810\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"question-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"question-text\",\n            children: currentQuestion.question\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 15\n          }, this), currentQuestion.image && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"question-image\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: currentQuestion.image,\n              alt: \"\\uBB38\\uC81C \\uC774\\uBBF8\\uC9C0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 17\n          }, this), currentQuestion.type === 'ox' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ox-options\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `ox-option ${showAnswer && currentQuestion.correctAnswer === 'O' ? 'correct' : ''}`,\n              children: \"O (\\uCC38)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `ox-option ${showAnswer && currentQuestion.correctAnswer === 'X' ? 'correct' : ''}`,\n              children: \"X (\\uAC70\\uC9D3)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 17\n          }, this), currentQuestion.type === 'multiple' && currentQuestion.options && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"multiple-options\",\n            children: currentQuestion.options.map((option, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `multiple-option ${showAnswer && index === currentQuestion.correctAnswer ? 'correct' : ''}`,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"option-number\",\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"option-text\",\n                children: option\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 17\n          }, this), currentQuestion.type === 'short' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"short-answer\",\n            style: {\n              background: showAnswer ? '#28a745' : '#f8f9fa',\n              color: showAnswer ? '#fff' : '#333'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"\\uC815\\uB2F5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"answer-text\",\n              children: showAnswer ? String(currentQuestion.correctAnswer) : '정답 공개 대기'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-question\",\n        children: gameState === 'waiting' || gameState === 'paused' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"waiting-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\uD83C\\uDFAF \\uB300\\uAE30\\uC911\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uBB38\\uC81C\\uB97C \\uCD94\\uAC00\\uD558\\uAC70\\uB098 \\uAC8C\\uC784\\uC744 \\uC2DC\\uC791\\uD574 \\uC8FC\\uC138\\uC694.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 15\n        }, this) : gameState === 'finished' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"finished-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\uD83C\\uDF89 \\uAC8C\\uC784\\uC774 \\uC885\\uB8CC\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uBAA8\\uB4E0 \\uBB38\\uC81C\\uAC00 \\uC644\\uB8CC\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 15\n        }, this) :\n        /*#__PURE__*/\n        // 남은 문제가 없고 종료가 아닌 경우 대기 처리\n        _jsxDEV(\"div\", {\n          className: \"waiting-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\uD83C\\uDFAF \\uB300\\uAE30\\uC911\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uBB38\\uC81C\\uB97C \\uCD94\\uAC00\\uD558\\uAC70\\uB098 \\uAC8C\\uC784\\uC744 \\uC2DC\\uC791\\uD574 \\uC8FC\\uC138\\uC694.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"game-footer\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"players-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"players-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uCC38\\uC5EC\\uC790 \\uD604\\uD669\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"player-stats\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\uC804\\uCCB4: \", players.length, \"\\uBA85\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\uD0C8\\uB77D: \", players.filter(p => p.isEliminated).length, \"\\uBA85\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\uC81C\\uCD9C: \", players.filter(p => p.hasSubmitted && !p.isEliminated).length, \"\\uBA85\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"players-grid\",\n          children: [sortPlayers(players).map(player => {\n            var _player$avatar, _player$avatar2, _player$avatar3, _player$avatar4, _player$avatar5, _player$avatar6, _player$avatar7, _player$avatar8, _player$avatar9;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `player-card ${player.isEliminated ? 'eliminated' : ''} ${player.hasSubmitted ? 'submitted' : ''} ${eliminateMode || reviveMode ? 'clickable' : ''}`,\n              onClick: () => handlePlayerClick(player.id),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"player-avatar\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"hover-action\",\n                  onClick: e => {\n                    e.stopPropagation();\n                    if (player.isEliminated) {\n                      actions.revivePlayer(player.id);\n                    } else {\n                      actions.eliminatePlayer(player.id);\n                    }\n                  },\n                  children: player.isEliminated ? '살리기' : '탈락시키기'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"avatar-background\",\n                  style: {\n                    backgroundColor: getBackgroundColor(((_player$avatar = player.avatar) === null || _player$avatar === void 0 ? void 0 : _player$avatar.backgroundColor) || 'PastelBlue')\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Avatar, {\n                    style: {\n                      width: '50px',\n                      height: '50px'\n                    },\n                    avatarStyle: \"Transparent\",\n                    topType: ((_player$avatar2 = player.avatar) === null || _player$avatar2 === void 0 ? void 0 : _player$avatar2.topType) || 'ShortHairShortFlat',\n                    accessoriesType: ((_player$avatar3 = player.avatar) === null || _player$avatar3 === void 0 ? void 0 : _player$avatar3.accessoriesType) || 'Blank',\n                    hairColor: ((_player$avatar4 = player.avatar) === null || _player$avatar4 === void 0 ? void 0 : _player$avatar4.hairColor) || 'BrownDark',\n                    facialHairType: \"Blank\",\n                    facialHairColor: \"BrownDark\",\n                    clotheType: \"ShirtCrewNeck\",\n                    clotheColor: ((_player$avatar5 = player.avatar) === null || _player$avatar5 === void 0 ? void 0 : _player$avatar5.clotheColor) || 'Blue01',\n                    eyeType: ((_player$avatar6 = player.avatar) === null || _player$avatar6 === void 0 ? void 0 : _player$avatar6.eyeType) || 'Happy',\n                    eyebrowType: ((_player$avatar7 = player.avatar) === null || _player$avatar7 === void 0 ? void 0 : _player$avatar7.eyebrowType) || 'Default',\n                    mouthType: ((_player$avatar8 = player.avatar) === null || _player$avatar8 === void 0 ? void 0 : _player$avatar8.mouthType) || 'Smile',\n                    skinColor: ((_player$avatar9 = player.avatar) === null || _player$avatar9 === void 0 ? void 0 : _player$avatar9.skinColor) || 'Light'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 329,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 19\n                }, this), player.hasSubmitted && !player.isEliminated && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"submitted-indicator\",\n                  children: \"\\u2713\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 21\n                }, this), player.isEliminated && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"eliminated-overlay\",\n                  children: \"\\u274C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"player-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"player-name\",\n                  children: player.nickname\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"player-score\",\n                  children: [player.score, \"\\uC810\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 19\n                }, this), player.team && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"player-team\",\n                  children: [player.team, \"\\uD300\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 17\n              }, this)]\n            }, player.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this);\n          }), players.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-players\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\uC544\\uC9C1 \\uCC38\\uC5EC\\uC790\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              children: [\"\\uBC29 \\uCF54\\uB4DC: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: room.code\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 30\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 219,\n    columnNumber: 5\n  }, this);\n};\n_s(NewGameHost, \"YA8j1WdMVfRcyMIa+A8hALgn1oU=\", false, function () {\n  return [useNewGameContext];\n});\n_c = NewGameHost;\nexport default NewGameHost;\nvar _c;\n$RefreshReg$(_c, \"NewGameHost\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNewGameContext","eventBus","syncManager","Avatar","jsxDEV","_jsxDEV","NewGameHost","_s","timeLeft","setTimeLeft","showAnswer","setShowAnswer","eliminateMode","setEliminateMode","reviveMode","setReviveMode","countdownActive","setCountdownActive","state","actions","room","questions","players","gameState","currentQuestionIndex","gameSettings","phaseStartedAt","phaseDuration","paused","mountedAtRef","Date","now","currentQuestion","getBackgroundColor","colorName","colorMap","Black","Brown","Red","Blue01","Blue02","Blue03","Gray01","Gray02","Heather","PastelBlue","PastelGreen","PastelOrange","PastelRed","PastelYellow","Pink","White","unsubscribers","on","handleGameStateChange","handleNextQuestion","handleAnswerShown","handlePlayerJoin","handlePlayerLeave","handleAnswerSubmitted","forEach","unsub","timeLimit","answerRevealTime","elapsed","Math","floor","remain","max","timer","setInterval","prev","next","clearInterval","mountedForMs","current","expired","autoMode","setTimeout","nextQuestion","delta","Number","_addEventListener","_ref","handler","addEventListener","call","_removeEventListener","_ref2","removeEventListener","data","console","log","player","nickname","playerId","handlePlayerClick","eliminatePlayer","document","body","style","cursor","revivePlayer","handleEliminateMode","handleReviveMode","cancelMode","sortPlayers","sort","a","b","isEliminated","score","formatTime","seconds","mins","secs","toString","padStart","className","children","fileName","_jsxFileName","lineNumber","columnNumber","position","top","right","marginBottom","display","justifyContent","alignItems","gap","flexWrap","length","question","image","src","alt","type","correctAnswer","options","map","option","index","background","color","String","filter","p","hasSubmitted","_player$avatar","_player$avatar2","_player$avatar3","_player$avatar4","_player$avatar5","_player$avatar6","_player$avatar7","_player$avatar8","_player$avatar9","onClick","id","e","stopPropagation","backgroundColor","avatar","width","height","avatarStyle","topType","accessoriesType","hairColor","facialHairType","facialHairColor","clotheType","clotheColor","eyeType","eyebrowType","mouthType","skinColor","team","code","_c","$RefreshReg$"],"sources":["C:/Users/9204r/.cursor/avatar/src/components/NewGameHost.tsx"],"sourcesContent":["/**\n * 새로운 모듈 기반 게임 진행 페이지\n * 실시간 동기화와 참여자 현황 관리\n */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Player } from '../types/game';\nimport { useNewGameContext } from '../contexts/NewGameContext';\nimport eventBus from '../services/EventBus';\nimport syncManager from '../services/SyncManager';\nimport Avatar from 'avataaars2';\nimport './GameHost.css';\n\nconst NewGameHost: React.FC = () => {\n  const [timeLeft, setTimeLeft] = useState<number>(0);\n  const [showAnswer, setShowAnswer] = useState(false);\n  const [eliminateMode, setEliminateMode] = useState(false);\n  const [reviveMode, setReviveMode] = useState(false);\n  const [countdownActive, setCountdownActive] = useState(false);\n\n  const { state, actions } = useNewGameContext();\n  const { room, questions, players, gameState, currentQuestionIndex, gameSettings, phaseStartedAt, phaseDuration, paused } = state;\n  const mountedAtRef = useRef<number>(Date.now());\n  \n  const currentQuestion = (gameState === 'playing' || gameState === 'showingAnswer' || gameState === 'paused')\n    ? (questions[currentQuestionIndex] || null)\n    : null;\n\n  const getBackgroundColor = (colorName: string): string => {\n    const colorMap: { [key: string]: string } = {\n      Black: '#262e33', Brown: '#8B4513', Red: '#C93305',\n      Blue01: '#65C9FF', Blue02: '#5199E4', Blue03: '#25557C',\n      Gray01: '#E6E6E6', Gray02: '#929598', Heather: '#3C4F5C',\n      PastelBlue: '#B1E2FF', PastelGreen: '#A7FFC4', PastelOrange: '#FFDEB5',\n      PastelRed: '#FFAFB9', PastelYellow: '#FFFFB1', Pink: '#FF488E', White: '#FFFFFF'\n    };\n    return colorMap[colorName] || '#B1E2FF';\n  };\n\n  useEffect(() => {\n    // 이벤트 리스너 등록\n    const unsubscribers = [\n      eventBus.on('GAME_STATE_CHANGE', handleGameStateChange),\n      eventBus.on('NEXT_QUESTION', handleNextQuestion),\n      eventBus.on('ANSWER_SHOWN', handleAnswerShown),\n      eventBus.on('PLAYER_JOIN', handlePlayerJoin),\n      eventBus.on('PLAYER_LEAVE', handlePlayerLeave),\n      eventBus.on('ANSWER_SUBMITTED', handleAnswerSubmitted)\n    ];\n\n    return () => {\n      unsubscribers.forEach(unsub => unsub());\n    };\n  }, []);\n\n  useEffect(() => {\n    // 단계 전환 시 타이머 초기화\n    if (gameState === 'playing' && currentQuestion) {\n      setTimeLeft(gameSettings.timeLimit);\n      setShowAnswer(false);\n      setCountdownActive(true);\n    } else if (gameState === 'showingAnswer') {\n      setTimeLeft(gameSettings.answerRevealTime);\n      setShowAnswer(true);\n      setCountdownActive(true);\n    } else {\n      setCountdownActive(false);\n    }\n  }, [gameState, currentQuestion, gameSettings.answerRevealTime]);\n\n  useEffect(() => {\n    // 서버/브로드캐스트 기준 남은 시간 계산\n    if ((gameState === 'playing' || gameState === 'showingAnswer') && phaseStartedAt && phaseDuration && !paused) {\n      const elapsed = Math.floor((Date.now() - phaseStartedAt) / 1000);\n      const remain = Math.max(0, (phaseDuration || 0) - elapsed);\n      setTimeLeft(remain);\n      setCountdownActive(true);\n    }\n  }, [gameState, phaseStartedAt, phaseDuration, paused]);\n\n  useEffect(() => {\n    if (!countdownActive) return;\n    if (!(gameState === 'playing' || gameState === 'showingAnswer')) return;\n    if (paused) return;\n    const timer = setInterval(() => {\n      setTimeLeft(prev => {\n        const next = Math.max(0, prev - 1);\n        return next;\n      });\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [countdownActive, gameState, paused]);\n\n  useEffect(() => {\n    if (!(gameState === 'playing' || gameState === 'showingAnswer')) return;\n    if (timeLeft > 0) return;\n    // 새로 열린 진행페이지에서 즉시 단계 전환되는 현상 방지: 마운트 후 짧은 유예\n    const mountedForMs = Date.now() - mountedAtRef.current;\n    if (mountedForMs < 1500) return;\n    // 실제 만료 검증(서버 기준 시간) 후에만 자동 전환\n    const expired = !!(phaseStartedAt && phaseDuration && (Date.now() - phaseStartedAt) / 1000 >= phaseDuration);\n    if (!expired) return;\n    setCountdownActive(false);\n    if (gameState === 'playing') {\n      if (gameSettings.autoMode) {\n        setTimeout(() => actions.showAnswer(), 150);\n      }\n    } else if (gameState === 'showingAnswer') {\n      if (gameSettings.autoMode) {\n        setTimeout(() => actions.nextQuestion(), 200);\n      }\n    }\n  }, [timeLeft, gameState, gameSettings.autoMode, actions, phaseStartedAt, phaseDuration]);\n\n  // 시간 조정 이벤트\n  useEffect(() => {\n    const unsub = eventBus.on('ADJUST_TIME', (delta: number) => {\n      setTimeLeft(prev => Math.max(0, prev + (Number(delta) || 0)));\n    });\n    return () => unsub();\n  }, []);\n\n  // 탭 간 시간 조정 동기화\n  useEffect(() => {\n    const handler = (delta: number) => {\n      setTimeLeft(prev => Math.max(0, prev + (Number(delta) || 0)));\n    };\n    (syncManager as any).addEventListener?.('ADJUST_TIME', handler);\n    return () => {\n      try { (syncManager as any).removeEventListener?.('ADJUST_TIME', handler); } catch {}\n    };\n  }, []);\n\n  const handleGameStateChange = (data: any) => {\n    console.log('🎮 게임 상태 변경:', data);\n  };\n\n  const handleNextQuestion = (data: any) => {\n    console.log('➡️ 다음 문제:', data);\n    setShowAnswer(false);\n  };\n\n  const handleAnswerShown = (data: any) => {\n    console.log('💡 정답 공개:', data);\n    setShowAnswer(true);\n  };\n\n  const handlePlayerJoin = (player: Player) => {\n    console.log('👤 새 참여자:', player.nickname);\n  };\n\n  const handlePlayerLeave = (playerId: string) => {\n    console.log('👤 참여자 퇴장:', playerId);\n  };\n\n  const handleAnswerSubmitted = (data: any) => {\n    console.log('📝 답안 제출:', data);\n  };\n\n  const handlePlayerClick = (playerId: string) => {\n    if (eliminateMode) {\n      actions.eliminatePlayer(playerId);\n      setEliminateMode(false);\n      document.body.style.cursor = 'default';\n    } else if (reviveMode) {\n      actions.revivePlayer(playerId);\n      setReviveMode(false);\n      document.body.style.cursor = 'default';\n    }\n  };\n\n  const handleEliminateMode = () => {\n    setEliminateMode(true);\n    setReviveMode(false);\n    document.body.style.cursor = 'url(\"data:image/svg+xml,<svg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'24\\' height=\\'24\\' viewBox=\\'0 0 24 24\\'><text y=\\'18\\' font-size=\\'18\\'>❌</text></svg>\") 12 12, auto';\n  };\n\n  const handleReviveMode = () => {\n    setReviveMode(true);\n    setEliminateMode(false);\n    document.body.style.cursor = 'url(\"data:image/svg+xml,<svg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'24\\' height=\\'24\\' viewBox=\\'0 0 24 24\\'><text y=\\'18\\' font-size=\\'18\\'>✅</text></svg>\") 12 12, auto';\n  };\n\n  const cancelMode = () => {\n    setEliminateMode(false);\n    setReviveMode(false);\n    document.body.style.cursor = 'default';\n  };\n\n  const sortPlayers = (players: Player[]): Player[] => {\n    return [...players].sort((a, b) => {\n      // 탈락자를 뒤로\n      if (a.isEliminated !== b.isEliminated) {\n        return a.isEliminated ? 1 : -1;\n      }\n      // 점수 순으로 정렬\n      return b.score - a.score;\n    });\n  };\n\n  const formatTime = (seconds: number): string => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  if (!room) {\n    return (\n      <div className=\"game-host loading\">\n        <div className=\"loading-message\">\n          <h2>게임 데이터를 불러오는 중...</h2>\n          <p>잠시만 기다려주세요.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"game-host\">\n      {(gameState === 'playing' || gameState === 'paused' || gameState === 'showingAnswer') && (\n        <div className=\"game-timer\" style={{ position: 'fixed', top: 12, right: 12 }}>\n          <div className={`timer ${timeLeft <= 5 ? 'warning' : ''}`}>⏱️ {formatTime(timeLeft)}</div>\n        </div>\n      )}\n\n      <main className=\"game-main\">\n            {currentQuestion ? (\n          <div className=\"question-display\">\n            <div className=\"question-header\" style={{ marginBottom: 20, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n              <div className=\"question-info\" style={{ display: 'flex', gap: 12, alignItems: 'center', flexWrap: 'wrap' }}>\n                <span className=\"question-number\">문제 {currentQuestionIndex + 1}/{questions.length}</span>\n                <span className=\"question-score\">배점: {currentQuestion.score}점</span>\n              </div>\n            </div>\n\n            <div className=\"question-content\">\n              <h2 className=\"question-text\">{currentQuestion.question}</h2>\n\n              {currentQuestion.image && (\n                <div className=\"question-image\">\n                  <img src={currentQuestion.image} alt=\"문제 이미지\" />\n                </div>\n              )}\n\n              {currentQuestion.type === 'ox' && (\n                <div className=\"ox-options\">\n                  <div className={`ox-option ${showAnswer && currentQuestion.correctAnswer === 'O' ? 'correct' : ''}`}>O (참)</div>\n                  <div className={`ox-option ${showAnswer && currentQuestion.correctAnswer === 'X' ? 'correct' : ''}`}>X (거짓)</div>\n                </div>\n              )}\n\n              {currentQuestion.type === 'multiple' && currentQuestion.options && (\n                <div className=\"multiple-options\">\n                  {currentQuestion.options.map((option: string, index: number) => (\n                    <div key={index} className={`multiple-option ${showAnswer && index === currentQuestion.correctAnswer ? 'correct' : ''}`}>\n                      <span className=\"option-number\">{index + 1}</span>\n                      <span className=\"option-text\">{option}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n\n              {currentQuestion.type === 'short' && (\n                <div className=\"short-answer\" style={{ background: showAnswer ? '#28a745' : '#f8f9fa', color: showAnswer ? '#fff' : '#333' }}>\n                  <h3>정답</h3>\n                  <p className=\"answer-text\">{showAnswer ? String(currentQuestion.correctAnswer) : '정답 공개 대기'}</p>\n                </div>\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className=\"no-question\">\n            {gameState === 'waiting' || gameState === 'paused' ? (\n              <div className=\"waiting-message\">\n                <h2>🎯 대기중</h2>\n                <p>문제를 추가하거나 게임을 시작해 주세요.</p>\n              </div>\n            ) : gameState === 'finished' ? (\n              <div className=\"finished-message\">\n                <h2>🎉 게임이 종료되었습니다!</h2>\n                <p>모든 문제가 완료되었습니다.</p>\n              </div>\n            ) : (\n              // 남은 문제가 없고 종료가 아닌 경우 대기 처리\n              <div className=\"waiting-message\">\n                <h2>🎯 대기중</h2>\n                <p>문제를 추가하거나 게임을 시작해 주세요.</p>\n              </div>\n            )}\n          </div>\n        )}\n      </main>\n\n      <footer className=\"game-footer\">\n        <div className=\"players-section\">\n          <div className=\"players-header\">\n            <h3>참여자 현황</h3>\n            <div className=\"player-stats\">\n              <span>전체: {players.length}명</span>\n              <span>탈락: {players.filter((p: Player) => p.isEliminated).length}명</span>\n              <span>제출: {players.filter((p: Player) => p.hasSubmitted && !p.isEliminated).length}명</span>\n            </div>\n          </div>\n          \n          <div className=\"players-grid\">\n            {sortPlayers(players).map(player => (\n              <div \n                key={player.id}\n                className={`player-card ${player.isEliminated ? 'eliminated' : ''} ${\n                  player.hasSubmitted ? 'submitted' : ''\n                } ${eliminateMode || reviveMode ? 'clickable' : ''}`}\n                onClick={() => handlePlayerClick(player.id)}\n              >\n                <div className=\"player-avatar\">\n                  <button className=\"hover-action\" onClick={(e) => {\n                    e.stopPropagation();\n                    if (player.isEliminated) {\n                      actions.revivePlayer(player.id);\n                    } else {\n                      actions.eliminatePlayer(player.id);\n                    }\n                  }}>\n                    {player.isEliminated ? '살리기' : '탈락시키기'}\n                  </button>\n                  <div \n                    className=\"avatar-background\"\n                    style={{ backgroundColor: getBackgroundColor(player.avatar?.backgroundColor || 'PastelBlue') }}\n                  >\n                    <Avatar\n                      style={{ width: '50px', height: '50px' }}\n                      avatarStyle=\"Transparent\"\n                      topType={player.avatar?.topType || 'ShortHairShortFlat'}\n                      accessoriesType={player.avatar?.accessoriesType || 'Blank'}\n                      hairColor={player.avatar?.hairColor || 'BrownDark'}\n                      facialHairType=\"Blank\"\n                      facialHairColor=\"BrownDark\"\n                      clotheType=\"ShirtCrewNeck\"\n                      clotheColor={player.avatar?.clotheColor || 'Blue01'}\n                      eyeType={player.avatar?.eyeType || 'Happy'}\n                      eyebrowType={player.avatar?.eyebrowType || 'Default'}\n                      mouthType={player.avatar?.mouthType || 'Smile'}\n                      skinColor={player.avatar?.skinColor || 'Light'}\n                    />\n                  </div>\n                  {player.hasSubmitted && !player.isEliminated && (\n                    <div className=\"submitted-indicator\">✓</div>\n                  )}\n                  {player.isEliminated && (\n                    <div className=\"eliminated-overlay\">❌</div>\n                  )}\n                </div>\n                <div className=\"player-info\">\n                  <span className=\"player-name\">{player.nickname}</span>\n                  <span className=\"player-score\">{player.score}점</span>\n                  {player.team && (\n                    <span className=\"player-team\">{player.team}팀</span>\n                  )}\n                </div>\n              </div>\n            ))}\n            \n            {players.length === 0 && (\n              <div className=\"no-players\">\n                <p>아직 참여자가 없습니다</p>\n                <small>방 코드: <strong>{room.code}</strong></small>\n              </div>\n            )}\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n};\n\nexport default NewGameHost;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}