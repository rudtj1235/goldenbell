{"ast":null,"code":"/**\n * ë°© ìƒëª…ì£¼ê¸° ê´€ë¦¬ì\n * ë°© ìƒì„±, ì‚­ì œ, ìë™ ì •ë¦¬ë¥¼ ë‹´ë‹¹\n */\n\nimport syncManager from './SyncManager';\n// ë‹¨ìˆœí™”ë¥¼ ìœ„í•´ ê³µê°œë°© ëª©ë¡ ë™ê¸°í™”ëŠ” localStorage ê¸°ë°˜ìœ¼ë¡œë§Œ ì²˜ë¦¬í•©ë‹ˆë‹¤.\n\nclass RoomManager {\n  constructor() {\n    this.rooms = new Map();\n    this.publicRooms = new Map();\n    this.hostSessions = new Map();\n    this.cleanupInterval = null;\n    this.loadRoomsFromStorage();\n    this.startCleanupTimer();\n    this.setupSyncListeners();\n    console.log('ğŸ  RoomManager ì´ˆê¸°í™”ë¨');\n  }\n  loadRoomsFromStorage() {\n    try {\n      const savedRooms = localStorage.getItem('publicRooms');\n      if (savedRooms) {\n        const roomData = JSON.parse(savedRooms);\n        const now = Date.now();\n        const filtered = roomData.filter(r => r.hostActive || now - (r.lastHostActivity || r.createdAt) < 60000);\n        filtered.forEach(room => {\n          this.publicRooms.set(room.code, room);\n        });\n        if (filtered.length !== roomData.length) {\n          this.saveRoomsToStorage();\n        }\n      }\n    } catch (e) {\n      console.error('ë°© ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', e);\n    }\n  }\n  saveRoomsToStorage() {\n    try {\n      const roomArray = Array.from(this.publicRooms.values());\n      localStorage.setItem('publicRooms', JSON.stringify(roomArray));\n    } catch (e) {\n      console.error('ë°© ë°ì´í„° ì €ì¥ ì‹¤íŒ¨:', e);\n    }\n  }\n  setupSyncListeners() {\n    // BroadcastChannel ê¸°ë°˜ ë™ê¸°í™” ì œê±°ë¡œ ë‹¨ìˆœí™”\n\n    syncManager.addEventListener('HOST_ACTIVITY', data => {\n      this.updateHostActivity(data.roomCode, data.sessionId);\n    });\n\n    // ROOM_CREATED/DELETED ê°œë³„ ì´ë²¤íŠ¸ëŠ” ì‚¬ìš©í•˜ì§€ ì•Šê³ , ROOMS_UPDATEDë§Œ ì‚¬ìš©í•´ ë‹¨ìˆœí™”\n\n    syncManager.addEventListener('ROOM_DELETED', roomCode => {\n      this.publicRooms.delete(roomCode);\n      this.rooms.delete(roomCode);\n      this.hostSessions.delete(roomCode);\n      this.saveRoomsToStorage();\n    });\n  }\n  startCleanupTimer() {\n    // ë‹¨ìˆœí™”: ì£¼ê¸° ì •ë¦¬ëŠ” ì œê±°. ìƒíƒœ ì „í™˜ ì‹œì (ë¹„í™œì„± ì²˜ë¦¬)ì—ì„œë§Œ ì‚­ì œ\n    this.cleanupInterval = null;\n  }\n  cleanupInactiveRooms() {}\n  createRoom(subject, isPublic, hostId) {\n    const roomCode = this.generateRoomCode();\n    const now = Date.now();\n    const room = {\n      id: `room_${now}`,\n      code: roomCode,\n      subject,\n      isPublic,\n      hostId,\n      players: [],\n      questions: [],\n      currentQuestionIndex: 0,\n      gameState: 'waiting',\n      eliminationMode: false,\n      eliminationThreshold: 3,\n      autoMode: true,\n      answerRevealTime: 5\n    };\n    this.rooms.set(roomCode, room);\n    if (isPublic) {\n      const publicRoom = {\n        id: room.id,\n        code: roomCode,\n        subject,\n        isPublic: true,\n        playerCount: 0,\n        hostActive: true,\n        lastHostActivity: now,\n        createdAt: now\n      };\n      this.publicRooms.set(roomCode, publicRoom);\n      this.hostSessions.set(roomCode, {\n        sessionId: hostId,\n        lastActivity: now\n      });\n\n      // ì €ì¥ë§Œ ìˆ˜í–‰(í‘œì‹œëŠ” ì°¸ì—¬í•˜ê¸° íƒ­ì´ localStorageì—ì„œ ì§ì ‘ ë¡œë“œ)\n      this.saveRoomsToStorage();\n    }\n    console.log('ğŸ  ë°© ìƒì„±ë¨:', roomCode, subject);\n    return room;\n  }\n  deleteRoom(roomCode) {\n    // í•­ìƒ ì‚­ì œ ì‹œë„í•˜ì—¬ í”ì  ì œê±°\n    this.publicRooms.delete(roomCode);\n    this.rooms.delete(roomCode);\n    this.hostSessions.delete(roomCode);\n    this.saveRoomsToStorage();\n    const payload = this.getPublicRooms();\n    syncManager.broadcast('ROOMS_UPDATED', payload);\n    eventBus.emit('ROOMS_UPDATED', payload);\n    syncManager.broadcast('ROOM_DELETED', roomCode);\n    console.log('ğŸ—‘ï¸ ë°© ì‚­ì œë¨:', roomCode);\n  }\n  updateHostActivity(roomCode, sessionId) {\n    const room = this.publicRooms.get(roomCode);\n    if (room) {\n      room.hostActive = true;\n      room.lastHostActivity = Date.now();\n      this.hostSessions.set(roomCode, {\n        sessionId,\n        lastActivity: Date.now()\n      });\n      this.saveRoomsToStorage();\n    }\n  }\n  markHostInactive(roomCode) {\n    const room = this.publicRooms.get(roomCode);\n    if (room) {\n      // ì¦‰ì‹œ ì˜êµ¬ ì‚­ì œí•˜ì—¬ í”ì  ì œê±°\n      this.deleteRoom(roomCode);\n    }\n  }\n  joinRoom(roomCode, player) {\n    let room = this.rooms.get(roomCode);\n\n    // ë°©ì´ ë©”ëª¨ë¦¬ì— ì—†ìœ¼ë©´ ê³µê°œë°© ëª©ë¡ì—ì„œ ì°¾ì•„ì„œ ìƒì„±\n    if (!room) {\n      const publicRoom = this.publicRooms.get(roomCode);\n      if (publicRoom) {\n        room = {\n          id: publicRoom.id,\n          code: roomCode,\n          subject: publicRoom.subject,\n          isPublic: publicRoom.isPublic,\n          hostId: 'temp_host',\n          players: [],\n          questions: [],\n          currentQuestionIndex: 0,\n          gameState: 'waiting',\n          eliminationMode: false,\n          eliminationThreshold: 3,\n          autoMode: true,\n          answerRevealTime: 5\n        };\n        this.rooms.set(roomCode, room);\n      }\n    }\n    if (room && !room.players.find(p => p.id === player.id)) {\n      room.players.push(player);\n\n      // ê³µê°œë°© í”Œë ˆì´ì–´ ìˆ˜ ì—…ë°ì´íŠ¸\n      const publicRoom = this.publicRooms.get(roomCode);\n      if (publicRoom) {\n        publicRoom.playerCount = room.players.length;\n        this.saveRoomsToStorage();\n      }\n\n      // ë™ê¸°í™” ë§¤ë‹ˆì €ì— ì•Œë¦¼\n      syncManager.addPlayer(player);\n      syncManager.updateGameData({\n        room,\n        players: room.players\n      });\n      console.log('ğŸ‘¤ í”Œë ˆì´ì–´ ë°© ì°¸ì—¬:', player.nickname, 'â†’', roomCode);\n      return room;\n    }\n    return null;\n  }\n  getRoom(roomCode) {\n    return this.rooms.get(roomCode) || null;\n  }\n  getPublicRooms() {\n    return Array.from(this.publicRooms.values());\n  }\n  generateRoomCode() {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n    let result = '';\n    for (let i = 0; i < 6; i++) {\n      result += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return result;\n  }\n  destroy() {\n    if (this.cleanupInterval) {\n      clearInterval(this.cleanupInterval);\n      this.cleanupInterval = null;\n    }\n    console.log('ğŸ  RoomManager ì¢…ë£Œë¨');\n  }\n}\n\n// ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤\nexport const roomManager = new RoomManager();\nexport default roomManager;","map":{"version":3,"names":["syncManager","RoomManager","constructor","rooms","Map","publicRooms","hostSessions","cleanupInterval","loadRoomsFromStorage","startCleanupTimer","setupSyncListeners","console","log","savedRooms","localStorage","getItem","roomData","JSON","parse","now","Date","filtered","filter","r","hostActive","lastHostActivity","createdAt","forEach","room","set","code","length","saveRoomsToStorage","e","error","roomArray","Array","from","values","setItem","stringify","addEventListener","data","updateHostActivity","roomCode","sessionId","delete","cleanupInactiveRooms","createRoom","subject","isPublic","hostId","generateRoomCode","id","players","questions","currentQuestionIndex","gameState","eliminationMode","eliminationThreshold","autoMode","answerRevealTime","publicRoom","playerCount","lastActivity","deleteRoom","payload","getPublicRooms","broadcast","eventBus","emit","get","markHostInactive","joinRoom","player","find","p","push","addPlayer","updateGameData","nickname","getRoom","chars","result","i","charAt","Math","floor","random","destroy","clearInterval","roomManager"],"sources":["C:/Users/9204r/.cursor/avatar/src/services/RoomManager.ts"],"sourcesContent":["/**\n * ë°© ìƒëª…ì£¼ê¸° ê´€ë¦¬ì\n * ë°© ìƒì„±, ì‚­ì œ, ìë™ ì •ë¦¬ë¥¼ ë‹´ë‹¹\n */\n\nimport { Room, Player } from '../types/game';\nimport syncManager from './SyncManager';\n// ë‹¨ìˆœí™”ë¥¼ ìœ„í•´ ê³µê°œë°© ëª©ë¡ ë™ê¸°í™”ëŠ” localStorage ê¸°ë°˜ìœ¼ë¡œë§Œ ì²˜ë¦¬í•©ë‹ˆë‹¤.\n\nexport interface PublicRoom {\n  id: string;\n  code: string;\n  subject: string;\n  isPublic: boolean;\n  playerCount: number;\n  hostActive: boolean;\n  lastHostActivity: number;\n  createdAt: number;\n}\n\nclass RoomManager {\n  private rooms: Map<string, Room> = new Map();\n  private publicRooms: Map<string, PublicRoom> = new Map();\n  private hostSessions: Map<string, { sessionId: string; lastActivity: number }> = new Map();\n  private cleanupInterval: NodeJS.Timeout | null = null;\n\n  constructor() {\n    this.loadRoomsFromStorage();\n    this.startCleanupTimer();\n    this.setupSyncListeners();\n    \n    console.log('ğŸ  RoomManager ì´ˆê¸°í™”ë¨');\n  }\n\n  private loadRoomsFromStorage() {\n    try {\n      const savedRooms = localStorage.getItem('publicRooms');\n      if (savedRooms) {\n        const roomData = JSON.parse(savedRooms) as PublicRoom[];\n        const now = Date.now();\n        const filtered = roomData.filter(r => r.hostActive || (now - (r.lastHostActivity || r.createdAt)) < 60000);\n        filtered.forEach((room: PublicRoom) => {\n          this.publicRooms.set(room.code, room);\n        });\n        if (filtered.length !== roomData.length) {\n          this.saveRoomsToStorage();\n        }\n      }\n    } catch (e) {\n      console.error('ë°© ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', e);\n    }\n  }\n\n  private saveRoomsToStorage() {\n    try {\n      const roomArray = Array.from(this.publicRooms.values());\n      localStorage.setItem('publicRooms', JSON.stringify(roomArray));\n    } catch (e) {\n      console.error('ë°© ë°ì´í„° ì €ì¥ ì‹¤íŒ¨:', e);\n    }\n  }\n\n  private setupSyncListeners() {\n    // BroadcastChannel ê¸°ë°˜ ë™ê¸°í™” ì œê±°ë¡œ ë‹¨ìˆœí™”\n\n    syncManager.addEventListener('HOST_ACTIVITY', (data: { roomCode: string; sessionId: string }) => {\n      this.updateHostActivity(data.roomCode, data.sessionId);\n    });\n\n    // ROOM_CREATED/DELETED ê°œë³„ ì´ë²¤íŠ¸ëŠ” ì‚¬ìš©í•˜ì§€ ì•Šê³ , ROOMS_UPDATEDë§Œ ì‚¬ìš©í•´ ë‹¨ìˆœí™”\n\n    syncManager.addEventListener('ROOM_DELETED', (roomCode: string) => {\n      this.publicRooms.delete(roomCode);\n      this.rooms.delete(roomCode);\n      this.hostSessions.delete(roomCode);\n      this.saveRoomsToStorage();\n    });\n  }\n\n  private startCleanupTimer() {\n    // ë‹¨ìˆœí™”: ì£¼ê¸° ì •ë¦¬ëŠ” ì œê±°. ìƒíƒœ ì „í™˜ ì‹œì (ë¹„í™œì„± ì²˜ë¦¬)ì—ì„œë§Œ ì‚­ì œ\n    this.cleanupInterval = null;\n  }\n\n  private cleanupInactiveRooms() {}\n\n  public createRoom(subject: string, isPublic: boolean, hostId: string): Room {\n    const roomCode = this.generateRoomCode();\n    const now = Date.now();\n    \n    const room: Room = {\n      id: `room_${now}`,\n      code: roomCode,\n      subject,\n      isPublic,\n      hostId,\n      players: [],\n      questions: [],\n      currentQuestionIndex: 0,\n      gameState: 'waiting',\n      eliminationMode: false,\n      eliminationThreshold: 3,\n      autoMode: true,\n      answerRevealTime: 5\n    };\n\n    this.rooms.set(roomCode, room);\n\n    if (isPublic) {\n      const publicRoom: PublicRoom = {\n        id: room.id,\n        code: roomCode,\n        subject,\n        isPublic: true,\n        playerCount: 0,\n        hostActive: true,\n        lastHostActivity: now,\n        createdAt: now\n      };\n\n      this.publicRooms.set(roomCode, publicRoom);\n      this.hostSessions.set(roomCode, { sessionId: hostId, lastActivity: now });\n      \n      // ì €ì¥ë§Œ ìˆ˜í–‰(í‘œì‹œëŠ” ì°¸ì—¬í•˜ê¸° íƒ­ì´ localStorageì—ì„œ ì§ì ‘ ë¡œë“œ)\n      this.saveRoomsToStorage();\n    }\n\n    console.log('ğŸ  ë°© ìƒì„±ë¨:', roomCode, subject);\n    return room;\n  }\n\n  public deleteRoom(roomCode: string) {\n    // í•­ìƒ ì‚­ì œ ì‹œë„í•˜ì—¬ í”ì  ì œê±°\n    this.publicRooms.delete(roomCode);\n    this.rooms.delete(roomCode);\n    this.hostSessions.delete(roomCode);\n    this.saveRoomsToStorage();\n    const payload = this.getPublicRooms();\n    syncManager.broadcast('ROOMS_UPDATED', payload);\n    eventBus.emit('ROOMS_UPDATED', payload);\n    syncManager.broadcast('ROOM_DELETED', roomCode);\n    console.log('ğŸ—‘ï¸ ë°© ì‚­ì œë¨:', roomCode);\n  }\n\n  public updateHostActivity(roomCode: string, sessionId: string) {\n    const room = this.publicRooms.get(roomCode);\n    if (room) {\n      room.hostActive = true;\n      room.lastHostActivity = Date.now();\n      \n      this.hostSessions.set(roomCode, { sessionId, lastActivity: Date.now() });\n      this.saveRoomsToStorage();\n    }\n  }\n\n  public markHostInactive(roomCode: string) {\n    const room = this.publicRooms.get(roomCode);\n    if (room) {\n      // ì¦‰ì‹œ ì˜êµ¬ ì‚­ì œí•˜ì—¬ í”ì  ì œê±°\n      this.deleteRoom(roomCode);\n    }\n  }\n\n  public joinRoom(roomCode: string, player: Player): Room | null {\n    let room = this.rooms.get(roomCode);\n    \n    // ë°©ì´ ë©”ëª¨ë¦¬ì— ì—†ìœ¼ë©´ ê³µê°œë°© ëª©ë¡ì—ì„œ ì°¾ì•„ì„œ ìƒì„±\n    if (!room) {\n      const publicRoom = this.publicRooms.get(roomCode);\n      if (publicRoom) {\n        room = {\n          id: publicRoom.id,\n          code: roomCode,\n          subject: publicRoom.subject,\n          isPublic: publicRoom.isPublic,\n          hostId: 'temp_host',\n          players: [],\n          questions: [],\n          currentQuestionIndex: 0,\n          gameState: 'waiting',\n          eliminationMode: false,\n          eliminationThreshold: 3,\n          autoMode: true,\n          answerRevealTime: 5\n        };\n        this.rooms.set(roomCode, room);\n      }\n    }\n\n    if (room && !room.players.find(p => p.id === player.id)) {\n      room.players.push(player);\n      \n      // ê³µê°œë°© í”Œë ˆì´ì–´ ìˆ˜ ì—…ë°ì´íŠ¸\n      const publicRoom = this.publicRooms.get(roomCode);\n      if (publicRoom) {\n        publicRoom.playerCount = room.players.length;\n        this.saveRoomsToStorage();\n      }\n\n      // ë™ê¸°í™” ë§¤ë‹ˆì €ì— ì•Œë¦¼\n      syncManager.addPlayer(player);\n      syncManager.updateGameData({ \n        room, \n        players: room.players \n      });\n\n      console.log('ğŸ‘¤ í”Œë ˆì´ì–´ ë°© ì°¸ì—¬:', player.nickname, 'â†’', roomCode);\n      return room;\n    }\n\n    return null;\n  }\n\n  public getRoom(roomCode: string): Room | null {\n    return this.rooms.get(roomCode) || null;\n  }\n\n  public getPublicRooms(): PublicRoom[] {\n    return Array.from(this.publicRooms.values());\n  }\n\n  private generateRoomCode(): string {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n    let result = '';\n    for (let i = 0; i < 6; i++) {\n      result += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return result;\n  }\n\n  public destroy() {\n    if (this.cleanupInterval) {\n      clearInterval(this.cleanupInterval);\n      this.cleanupInterval = null;\n    }\n    console.log('ğŸ  RoomManager ì¢…ë£Œë¨');\n  }\n}\n\n// ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤\nexport const roomManager = new RoomManager();\nexport default roomManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}