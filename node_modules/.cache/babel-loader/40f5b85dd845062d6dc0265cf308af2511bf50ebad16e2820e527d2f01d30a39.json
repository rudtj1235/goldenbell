{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\9204r\\\\.cursor\\\\avatar\\\\src\\\\components\\\\NewAdminPanel.tsx\",\n  _s = $RefreshSig$();\n/**\n * 새로운 모듈 기반 관리자 패널\n * 실시간 동기화와 참여자 현황 관리\n */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useNewGameContext } from '../contexts/NewGameContext';\nimport Avatar from 'avataaars2';\nimport QuestionModal from './QuestionModal';\nimport QuestionStack from './QuestionStack';\nimport eventBus from '../services/EventBus';\nimport roomManager from '../services/RoomManager';\nimport syncManager from '../services/SyncManager';\nimport './AdminPanel.css';\nimport LeaderboardModal from './Leaderboard';\nimport AiQuestionModal from './AiQuestionModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NewAdminPanel = () => {\n  _s();\n  const [showQuestionModal, setShowQuestionModal] = useState(false);\n  const {\n    state,\n    actions\n  } = useNewGameContext();\n  const navigate = useNavigate();\n  const {\n    room,\n    questions,\n    players,\n    gameState,\n    currentQuestionIndex,\n    gameSettings,\n    hasStarted,\n    isLoading\n  } = state;\n\n  // 호스트 활동 주기적 업데이트\n  useEffect(() => {\n    if (!room) {\n      // 초기 하이드레이션 중에는 리다이렉트하지 않음\n      if (isLoading) return;\n      return;\n    }\n\n    // 초기 호스트 활동 등록\n    actions.updateHostActivity(room.code);\n\n    // 주기적으로 호스트 활동 업데이트 (5초마다)\n    const activityInterval = setInterval(() => {\n      actions.updateHostActivity(room.code);\n    }, 5000);\n\n    // 이벤트 리스너 등록\n    const unsubscribers = [eventBus.on('PLAYER_JOIN', handlePlayerJoin), eventBus.on('PLAYER_LEAVE', handlePlayerLeave), eventBus.on('GAME_STATE_CHANGE', handleGameStateChange), eventBus.on('ROOM_DELETED', handleRoomDeleted)];\n\n    // 페이지 언로드 시 호스트 비활성 (10초 후 삭제 타이머 작동)\n    const handleBeforeUnload = () => {\n      try {\n        roomManager.markHostInactive(room.code);\n      } catch {}\n    };\n    window.addEventListener('beforeunload', handleBeforeUnload);\n    return () => {\n      clearInterval(activityInterval);\n      unsubscribers.forEach(unsub => unsub());\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n      // StrictMode 이중 마운트로 인한 즉시 삭제 방지: cleanup에서는 삭제하지 않음\n    };\n  }, [room, actions, navigate, isLoading]);\n\n  // 자동 진행 보조(진행페이지가 열려있지 않아도 관리자 페이지에서 전환 보장)\n  useEffect(() => {\n    if (!room) return;\n    let ticking = true;\n    const tick = () => {\n      if (!ticking) return;\n      try {\n        if (!(gameState === 'playing' || gameState === 'showingAnswer')) return;\n        if (!gameSettings.autoMode) return;\n        const {\n          phaseStartedAt,\n          phaseDuration,\n          paused\n        } = state;\n        if (!phaseStartedAt || !phaseDuration || paused) return;\n        const elapsed = Math.floor((Date.now() - phaseStartedAt) / 1000);\n        const remain = Math.max(0, phaseDuration - elapsed);\n        if (remain === 0) {\n          if (gameState === 'playing') {\n            console.info('[AUTO_FLOW_ADMIN] showAnswer() due to timeout', {\n              index: currentQuestionIndex\n            });\n            actions.showAnswer();\n          } else if (gameState === 'showingAnswer') {\n            console.info('[AUTO_FLOW_ADMIN] nextQuestion() due to timeout', {\n              index: currentQuestionIndex\n            });\n            actions.nextQuestion();\n          }\n        }\n      } finally {\n        setTimeout(tick, 300);\n      }\n    };\n    const id = setTimeout(tick, 300);\n    return () => {\n      ticking = false;\n      clearTimeout(id);\n    };\n  }, [room, gameState, gameSettings.autoMode, currentQuestionIndex, state, actions]);\n  const handlePlayerJoin = player => {\n    console.log('👤 새 참여자:', player.nickname);\n  };\n  const handlePlayerLeave = playerId => {\n    console.log('👤 참여자 퇴장:', playerId);\n  };\n  const handleGameStateChange = data => {\n    console.log('🎮 게임 상태 변경:', data);\n  };\n  const handleRoomDeleted = roomCode => {\n    if ((room === null || room === void 0 ? void 0 : room.code) === roomCode) {\n      alert('방이 삭제되었습니다.');\n      navigate('/');\n    }\n  };\n  const handleDeleteQuestion = questionId => {\n    actions.deleteQuestion(questionId);\n  };\n  const handleReorderQuestions = reorderedQuestions => {\n    actions.reorderQuestions(reorderedQuestions);\n  };\n  const handleStartGame = () => {\n    if (questions.length === 0) {\n      alert('문제를 먼저 추가해주세요.');\n      return;\n    }\n    actions.startGame();\n  };\n  const handlePauseGame = () => {\n    actions.pauseGame();\n  };\n  const handleResumeGame = () => {\n    actions.resumeGame();\n  };\n  const handleSubmitQuestion = () => {\n    actions.nextQuestion();\n  };\n  const handleRevealAnswer = () => {\n    actions.showAnswer();\n  };\n  const handleGameSettingsChange = newSettings => {\n    actions.updateGameSettings(newSettings);\n  };\n  const [showLeaderboard, setShowLeaderboard] = useState(false);\n  const handleShowLeaderboard = () => setShowLeaderboard(true);\n  const [showAiModal, setShowAiModal] = useState(false);\n  const fileInputRef = useRef(null);\n  const toCsvValue = value => {\n    const str = value === undefined || value === null ? '' : String(value);\n    if (/[\",\\n]/.test(str)) {\n      return '\"' + str.replace(/\"/g, '\"\"') + '\"';\n    }\n    return str;\n  };\n  const handleDownloadQuestions = () => {\n    if (!questions || questions.length === 0) {\n      alert('다운로드할 문제가 없습니다.');\n      return;\n    }\n    if (!window.confirm('현재 문제 세트를 파일로 저장하시겠습니까?')) return;\n    const headers = ['type', 'question', 'score', 'timeLimit', 'options', 'correctAnswer'];\n    const rows = questions.map(q => {\n      const options = Array.isArray(q.options) ? JSON.stringify(q.options) : '';\n      return [q.type, q.question, typeof q.score === 'number' ? q.score : 10, typeof q.timeLimit === 'number' ? q.timeLimit : gameSettings.timeLimit, options, q.correctAnswer];\n    });\n    const csv = [headers.map(toCsvValue).join(','), ...rows.map(r => r.map(toCsvValue).join(','))].join('\\n');\n    const blob = new Blob([csv], {\n      type: 'text/csv;charset=utf-8;'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    const date = new Date().toISOString().slice(0, 10);\n    a.download = `goldenbell_questions_${(room === null || room === void 0 ? void 0 : room.code) || 'room'}_${date}.csv`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n  const handleUploadClick = () => {\n    var _fileInputRef$current;\n    (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n  };\n  const parseCsv = text => {\n    const rows = [];\n    let cur = [];\n    let val = '';\n    let inQuotes = false;\n    for (let i = 0; i < text.length; i++) {\n      const ch = text[i];\n      if (inQuotes) {\n        if (ch === '\"') {\n          if (text[i + 1] === '\"') {\n            val += '\"';\n            i++;\n          } else {\n            inQuotes = false;\n          }\n        } else {\n          val += ch;\n        }\n      } else {\n        if (ch === '\"') {\n          inQuotes = true;\n        } else if (ch === ',') {\n          cur.push(val);\n          val = '';\n        } else if (ch === '\\n' || ch === '\\r') {\n          if (val !== '' || cur.length > 0) {\n            cur.push(val);\n            rows.push(cur);\n            cur = [];\n            val = '';\n          }\n          // handle \\r\\n by skipping next if needed\n          if (ch === '\\r' && text[i + 1] === '\\n') i++;\n        } else {\n          val += ch;\n        }\n      }\n    }\n    if (val !== '' || cur.length > 0) {\n      cur.push(val);\n      rows.push(cur);\n    }\n    return rows.filter(r => r.some(c => String(c).trim() !== ''));\n  };\n  const handleFileChange = e => {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = () => {\n      try {\n        const text = String(reader.result || '');\n        const rows = parseCsv(text);\n        if (rows.length === 0) throw new Error('빈 파일');\n        const header = rows[0].map(h => h.trim());\n        const colIndex = name => header.findIndex(h => h.toLowerCase() === name.toLowerCase());\n        const idx = {\n          type: colIndex('type'),\n          question: colIndex('question'),\n          score: colIndex('score'),\n          timeLimit: colIndex('timeLimit'),\n          options: colIndex('options'),\n          correctAnswer: colIndex('correctAnswer')\n        };\n        const missing = Object.entries(idx).filter(([, v]) => v < 0).map(([k]) => k);\n        if (missing.length) throw new Error('누락된 컬럼: ' + missing.join(', '));\n        const imported = rows.slice(1).map(r => {\n          const rawType = r[idx.type] || '';\n          const type = String(rawType).toLowerCase();\n          const question = r[idx.question] || '';\n          const score = parseInt(String(r[idx.score] || '10')) || 10;\n          const timeLimit = parseInt(String(r[idx.timeLimit] || String(gameSettings.timeLimit))) || gameSettings.timeLimit;\n          let options;\n          const rawOptions = r[idx.options];\n          if (rawOptions) {\n            try {\n              options = JSON.parse(rawOptions);\n            } catch {\n              options = String(rawOptions).split('|').map(s => s.trim()).filter(Boolean);\n            }\n          }\n          const rawCorrect = r[idx.correctAnswer];\n          let correctAnswer = rawCorrect !== null && rawCorrect !== void 0 ? rawCorrect : '';\n          if (type === 'multiple' && options && options.length) {\n            const num = Number(correctAnswer);\n            if (!isNaN(num)) correctAnswer = num;else {\n              const found = options.findIndex(o => String(o) === String(correctAnswer));\n              correctAnswer = found >= 0 ? found : 0;\n            }\n          }\n          return {\n            id: 'q_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6),\n            type,\n            question,\n            score,\n            timeLimit,\n            options,\n            correctAnswer\n          };\n        }).filter(q => q.question && q.type);\n        if (imported.length === 0) throw new Error('유효한 문제가 없습니다.');\n        if (!window.confirm(`현재 문제를 ${imported.length}개의 항목으로 교체하시겠습니까?`)) return;\n        actions.reorderQuestions(imported);\n        alert(`문제 ${imported.length}개를 불러왔습니다.`);\n      } catch (err) {\n        console.error('문제 업로드 실패:', err);\n        alert('업로드에 실패했습니다: ' + ((err === null || err === void 0 ? void 0 : err.message) || String(err)));\n      } finally {\n        e.target.value = '';\n      }\n    };\n    reader.readAsText(file, 'utf-8');\n  };\n  const handleOpenGameHost = () => {\n    // 새 탭에서 진행 페이지 열기\n    window.open('/game-host', '_blank');\n  };\n  const handleBackToMain = () => {\n    // 방 삭제 후 메인으로 이동\n    if (room) {\n      roomManager.deleteRoom(room.code);\n    }\n    actions.resetGame();\n    navigate('/');\n  };\n  const handleQuestionSubmit = question => {\n    const newQuestion = {\n      id: 'q_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6),\n      ...question\n    };\n    actions.addQuestion(newQuestion);\n    setShowQuestionModal(false);\n  };\n  if (!room) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-panel\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uBC29 \\uC815\\uBCF4\\uB97C \\uBD88\\uB7EC\\uC624\\uB294 \\uC911...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\uC7A0\\uC2DC\\uB9CC \\uAE30\\uB2E4\\uB824\\uC8FC\\uC138\\uC694.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-panel\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"admin-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-btn\",\n        onClick: handleBackToMain,\n        children: \"\\u2190 \\uB4A4\\uB85C\\uAC00\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"room-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\uACE8\\uB4E0\\uBCA8 \\uAD00\\uB9AC\\uC790\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"room-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"room-code\",\n            children: [\"\\uBC29 \\uCF54\\uB4DC: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: room.code\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 47\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"room-subject\",\n            children: [\"\\uC8FC\\uC81C: \", room.subject]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"room-type\",\n            children: room.isPublic ? '🌐 공개방' : '🔒 비공개방'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"open-host-floating\",\n        onClick: handleOpenGameHost,\n        disabled: !room,\n        children: \"\\uC9C4\\uD589\\uD398\\uC774\\uC9C0 \\uC5F4\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"left-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uAC8C\\uC784 \\uC81C\\uC5B4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"control-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"start-btn control-btn\",\n              onClick: handleStartGame,\n              disabled: questions.length === 0 || gameState === 'playing' || gameState === 'showingAnswer',\n              children: hasStarted ? '다시 시작' : '시작'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"pause-btn control-btn\",\n              onClick: handlePauseGame,\n              disabled: !(gameState === 'playing' || gameState === 'showingAnswer'),\n              children: \"\\uC77C\\uC2DC\\uC815\\uC9C0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"time-controls\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                placeholder: \"\\uC2DC\\uAC04\",\n                className: \"time-input\",\n                onKeyDown: e => {\n                  if (e.key === 'Enter') {\n                    const v = parseInt(e.target.value);\n                    if (!isNaN(v)) {\n                      if (gameState === 'playing' || gameState === 'showingAnswer' || gameState === 'paused') {\n                        eventBus.emit('ADJUST_TIME', v);\n                        syncManager.broadcast('ADJUST_TIME', v);\n                      }\n                      e.target.value = '';\n                    }\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `time-unit ${!(gameState === 'playing' || gameState === 'showingAnswer' || gameState === 'paused') ? 'disabled' : ''}`,\n                children: \"(\\uCD08)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"control-btn\",\n                onClick: () => {\n                  eventBus.emit('ADJUST_TIME', 5);\n                  syncManager.broadcast('ADJUST_TIME', 5);\n                },\n                disabled: !(gameState === 'playing' || gameState === 'showingAnswer' || gameState === 'paused'),\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"control-btn\",\n                onClick: () => {\n                  eventBus.emit('ADJUST_TIME', -5);\n                  syncManager.broadcast('ADJUST_TIME', -5);\n                },\n                disabled: !(gameState === 'playing' || gameState === 'showingAnswer' || gameState === 'paused'),\n                children: \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"submit-btn control-btn\",\n              onClick: () => {\n                if (gameState === 'playing') {\n                  actions.showAnswer();\n                } else if (gameState === 'showingAnswer') {\n                  actions.nextQuestion();\n                }\n              },\n              disabled: !(gameState === 'playing' || gameState === 'showingAnswer'),\n              children: \"\\uB118\\uC5B4\\uAC00\\uAE30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"control-btn\",\n              onClick: () => actions.endGame(),\n              children: \"\\uC885\\uB8CC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"leaderboard-btn\",\n              onClick: handleShowLeaderboard,\n              children: \"\\uC21C\\uC704\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"participants-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uC2E4\\uC2DC\\uAC04 \\uCC38\\uC5EC\\uC790 \\uD604\\uD669\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 13\n          }, this), players.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-participants\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\uD83C\\uDFAF \\uC544\\uC9C1 \\uCC38\\uC5EC\\uC790\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              children: [\"\\uBC29 \\uCF54\\uB4DC: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: room.code\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 30\n              }, this), \"\\uB97C \\uACF5\\uC720\\uD574\\uC8FC\\uC138\\uC694\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"participants-list\",\n            children: players.map(player => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"participant-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"participant-avatar\",\n                children: /*#__PURE__*/_jsxDEV(Avatar, {\n                  ...player.avatar\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"participant-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"participant-name\",\n                  children: player.nickname\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"participant-team\",\n                  children: [player.team || '개인', \" \", player.team ? '팀' : '']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 443,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"participant-status\",\n                  children: player.isEliminated ? '❌ 탈락' : '✅ 참여중'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 21\n              }, this)]\n            }, player.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"questions-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"questions-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"\\uBB38\\uC81C \\uAD00\\uB9AC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                gap: '8px',\n                flexWrap: 'wrap'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-primary add-question-btn\",\n                onClick: () => setShowQuestionModal(true),\n                children: \"+ \\uBB38\\uC81C \\uCD94\\uAC00\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-primary add-question-btn ai-add-btn\",\n                onClick: () => setShowAiModal(true),\n                children: \"AI \\uBB38\\uC81C \\uCD94\\uAC00\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-primary\",\n                onClick: handleDownloadQuestions,\n                children: \"\\uBB38\\uC81C \\uB2E4\\uC6B4\\uB85C\\uB4DC(CSV)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-primary\",\n                onClick: handleUploadClick,\n                children: \"\\uBB38\\uC81C \\uC5C5\\uB85C\\uB4DC(CSV)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                ref: fileInputRef,\n                type: \"file\",\n                accept: \".csv\",\n                style: {\n                  display: 'none'\n                },\n                onChange: handleFileChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 486,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(QuestionStack, {\n            questions: questions,\n            onDelete: handleDeleteQuestion,\n            onReorder: handleReorderQuestions,\n            currentIndex: currentQuestionIndex,\n            gameState: gameState,\n            hasStarted: hasStarted\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"settings-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD0C0\\uC774\\uBA38 \\uC124\\uC815\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"setting-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\uBB38\\uC81C \\uC2DC\\uAC04(\\uCD08)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: gameSettings.timeLimit,\n              min: 1,\n              max: 300,\n              onChange: e => handleGameSettingsChange({\n                timeLimit: parseInt(e.target.value) || 1\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              children: \"\\uBB38\\uC81C\\uAC00 \\uACF5\\uAC1C\\uB418\\uB294 \\uC2DC\\uAC04\\uC785\\uB2C8\\uB2E4.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"setting-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\uC815\\uB2F5 \\uACF5\\uAC1C \\uC2DC\\uAC04(\\uCD08)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: gameSettings.answerRevealTime,\n              min: 1,\n              max: 120,\n              onChange: e => handleGameSettingsChange({\n                answerRevealTime: parseInt(e.target.value) || 1\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              children: \"\\uC815\\uB2F5\\uC744 \\uACF5\\uAC1C\\uD558\\uB294 \\uC2DC\\uAC04\\uC785\\uB2C8\\uB2E4.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"checkbox-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"checkbox-label\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                checked: !gameSettings.autoMode,\n                onChange: e => handleGameSettingsChange({\n                  autoMode: !e.target.checked\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 526,\n                columnNumber: 17\n              }, this), \"\\uC218\\uB3D9 \\uBAA8\\uB4DC\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 525,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              children: \"\\uC218\\uB3D9 \\uBAA8\\uB4DC\\uB294 \\uB2E4\\uC74C \\uB2E8\\uACC4\\uB85C \\uB118\\uC5B4\\uAC08 \\uB54C \\uC9C1\\uC811 \\u2018\\uB118\\uC5B4\\uAC00\\uAE30\\u2019\\uB97C \\uB20C\\uB7EC\\uC57C \\uD569\\uB2C8\\uB2E4.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, this), showQuestionModal && /*#__PURE__*/_jsxDEV(QuestionModal, {\n      onSubmit: handleQuestionSubmit,\n      onClose: () => setShowQuestionModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 9\n    }, this), showAiModal && /*#__PURE__*/_jsxDEV(AiQuestionModal, {\n      onClose: () => setShowAiModal(false),\n      onGenerate: list => {\n        console.info('[AI_GEN_WIRE] 수신 항목 수', list.length);\n        const mapped = list.map(q => ({\n          id: q.id || 'q_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6),\n          type: q.type,\n          question: q.question,\n          score: typeof q.score === 'number' ? q.score : 10,\n          timeLimit: gameSettings.timeLimit,\n          options: q.options,\n          correctAnswer: q.correctAnswer\n        }));\n        actions.addQuestionsBulk(mapped);\n        setShowAiModal(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 9\n    }, this), showLeaderboard && /*#__PURE__*/_jsxDEV(LeaderboardModal, {\n      onClose: () => setShowLeaderboard(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 565,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 341,\n    columnNumber: 5\n  }, this);\n};\n_s(NewAdminPanel, \"+FZGDGh0QczD1fwp3YReL7XorzM=\", false, function () {\n  return [useNewGameContext, useNavigate];\n});\n_c = NewAdminPanel;\nexport default NewAdminPanel;\nvar _c;\n$RefreshReg$(_c, \"NewAdminPanel\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","useNewGameContext","Avatar","QuestionModal","QuestionStack","eventBus","roomManager","syncManager","LeaderboardModal","AiQuestionModal","jsxDEV","_jsxDEV","NewAdminPanel","_s","showQuestionModal","setShowQuestionModal","state","actions","navigate","room","questions","players","gameState","currentQuestionIndex","gameSettings","hasStarted","isLoading","updateHostActivity","code","activityInterval","setInterval","unsubscribers","on","handlePlayerJoin","handlePlayerLeave","handleGameStateChange","handleRoomDeleted","handleBeforeUnload","markHostInactive","window","addEventListener","clearInterval","forEach","unsub","removeEventListener","ticking","tick","autoMode","phaseStartedAt","phaseDuration","paused","elapsed","Math","floor","Date","now","remain","max","console","info","index","showAnswer","nextQuestion","setTimeout","id","clearTimeout","player","log","nickname","playerId","data","roomCode","alert","handleDeleteQuestion","questionId","deleteQuestion","handleReorderQuestions","reorderedQuestions","reorderQuestions","handleStartGame","length","startGame","handlePauseGame","pauseGame","handleResumeGame","resumeGame","handleSubmitQuestion","handleRevealAnswer","handleGameSettingsChange","newSettings","updateGameSettings","showLeaderboard","setShowLeaderboard","handleShowLeaderboard","showAiModal","setShowAiModal","fileInputRef","toCsvValue","value","str","undefined","String","test","replace","handleDownloadQuestions","confirm","headers","rows","map","q","options","Array","isArray","JSON","stringify","type","question","score","timeLimit","correctAnswer","csv","join","r","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","date","toISOString","slice","download","body","appendChild","click","removeChild","revokeObjectURL","handleUploadClick","_fileInputRef$current","current","parseCsv","text","cur","val","inQuotes","i","ch","push","filter","some","c","trim","handleFileChange","e","_e$target$files","file","target","files","reader","FileReader","onload","result","Error","header","h","colIndex","name","findIndex","toLowerCase","idx","missing","Object","entries","v","k","imported","rawType","parseInt","rawOptions","parse","split","s","Boolean","rawCorrect","num","Number","isNaN","found","o","random","toString","substr","err","error","message","readAsText","handleOpenGameHost","open","handleBackToMain","deleteRoom","resetGame","handleQuestionSubmit","newQuestion","addQuestion","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","subject","isPublic","disabled","placeholder","onKeyDown","key","emit","broadcast","endGame","avatar","team","isEliminated","style","display","gap","flexWrap","ref","accept","onChange","onDelete","onReorder","currentIndex","min","answerRevealTime","checked","onSubmit","onClose","onGenerate","list","mapped","addQuestionsBulk","_c","$RefreshReg$"],"sources":["C:/Users/9204r/.cursor/avatar/src/components/NewAdminPanel.tsx"],"sourcesContent":["/**\n * 새로운 모듈 기반 관리자 패널\n * 실시간 동기화와 참여자 현황 관리\n */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Question, GameSettings, QuestionType } from '../types/game';\nimport { useNewGameContext } from '../contexts/NewGameContext';\nimport Avatar from 'avataaars2';\nimport QuestionModal from './QuestionModal';\nimport QuestionStack from './QuestionStack';\nimport eventBus from '../services/EventBus';\nimport roomManager from '../services/RoomManager';\nimport syncManager from '../services/SyncManager';\nimport './AdminPanel.css';\nimport LeaderboardModal from './Leaderboard';\nimport AiQuestionModal from './AiQuestionModal';\nimport { AiQuestion } from '../services/ai';\n\nconst NewAdminPanel: React.FC = () => {\n  const [showQuestionModal, setShowQuestionModal] = useState(false);\n  const { state, actions } = useNewGameContext();\n  const navigate = useNavigate();\n\n  const { \n    room, \n    questions, \n    players, \n    gameState, \n    currentQuestionIndex, \n    gameSettings,\n    hasStarted,\n    isLoading\n  } = state;\n\n  // 호스트 활동 주기적 업데이트\n  useEffect(() => {\n    if (!room) {\n      // 초기 하이드레이션 중에는 리다이렉트하지 않음\n      if (isLoading) return;\n      return;\n    }\n\n    // 초기 호스트 활동 등록\n    actions.updateHostActivity(room.code);\n\n    // 주기적으로 호스트 활동 업데이트 (5초마다)\n    const activityInterval = setInterval(() => {\n      actions.updateHostActivity(room.code);\n    }, 5000);\n\n    // 이벤트 리스너 등록\n    const unsubscribers = [\n      eventBus.on('PLAYER_JOIN', handlePlayerJoin),\n      eventBus.on('PLAYER_LEAVE', handlePlayerLeave),\n      eventBus.on('GAME_STATE_CHANGE', handleGameStateChange),\n      eventBus.on('ROOM_DELETED', handleRoomDeleted)\n    ];\n\n    // 페이지 언로드 시 호스트 비활성 (10초 후 삭제 타이머 작동)\n    const handleBeforeUnload = () => {\n      try { roomManager.markHostInactive(room.code); } catch {}\n    };\n    window.addEventListener('beforeunload', handleBeforeUnload);\n\n    return () => {\n      clearInterval(activityInterval);\n      unsubscribers.forEach(unsub => unsub());\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n      // StrictMode 이중 마운트로 인한 즉시 삭제 방지: cleanup에서는 삭제하지 않음\n    };\n  }, [room, actions, navigate, isLoading]);\n\n  // 자동 진행 보조(진행페이지가 열려있지 않아도 관리자 페이지에서 전환 보장)\n  useEffect(() => {\n    if (!room) return;\n    let ticking = true;\n    const tick = () => {\n      if (!ticking) return;\n      try {\n        if (!(gameState === 'playing' || gameState === 'showingAnswer')) return;\n        if (!gameSettings.autoMode) return;\n        const { phaseStartedAt, phaseDuration, paused } = state as any;\n        if (!phaseStartedAt || !phaseDuration || paused) return;\n        const elapsed = Math.floor((Date.now() - phaseStartedAt) / 1000);\n        const remain = Math.max(0, phaseDuration - elapsed);\n        if (remain === 0) {\n          if (gameState === 'playing') {\n            console.info('[AUTO_FLOW_ADMIN] showAnswer() due to timeout', { index: currentQuestionIndex });\n            actions.showAnswer();\n          } else if (gameState === 'showingAnswer') {\n            console.info('[AUTO_FLOW_ADMIN] nextQuestion() due to timeout', { index: currentQuestionIndex });\n            actions.nextQuestion();\n          }\n        }\n      } finally {\n        setTimeout(tick, 300);\n      }\n    };\n    const id = setTimeout(tick, 300);\n    return () => { ticking = false; clearTimeout(id); };\n  }, [room, gameState, gameSettings.autoMode, currentQuestionIndex, state, actions]);\n\n  const handlePlayerJoin = (player: any) => {\n    console.log('👤 새 참여자:', player.nickname);\n  };\n\n  const handlePlayerLeave = (playerId: string) => {\n    console.log('👤 참여자 퇴장:', playerId);\n  };\n\n  const handleGameStateChange = (data: any) => {\n    console.log('🎮 게임 상태 변경:', data);\n  };\n\n  const handleRoomDeleted = (roomCode: string) => {\n    if (room?.code === roomCode) {\n      alert('방이 삭제되었습니다.');\n      navigate('/');\n    }\n  };\n\n  const handleDeleteQuestion = (questionId: string) => {\n    actions.deleteQuestion(questionId);\n  };\n\n  const handleReorderQuestions = (reorderedQuestions: Question[]) => {\n    actions.reorderQuestions(reorderedQuestions);\n  };\n\n  const handleStartGame = () => {\n    if (questions.length === 0) {\n      alert('문제를 먼저 추가해주세요.');\n      return;\n    }\n    actions.startGame();\n  };\n\n  const handlePauseGame = () => {\n    actions.pauseGame();\n  };\n\n  const handleResumeGame = () => {\n    actions.resumeGame();\n  };\n\n  const handleSubmitQuestion = () => {\n    actions.nextQuestion();\n  };\n\n  const handleRevealAnswer = () => {\n    actions.showAnswer();\n  };\n\n  const handleGameSettingsChange = (newSettings: Partial<GameSettings>) => {\n    actions.updateGameSettings(newSettings);\n  };\n\n  const [showLeaderboard, setShowLeaderboard] = useState(false);\n  const handleShowLeaderboard = () => setShowLeaderboard(true);\n  const [showAiModal, setShowAiModal] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const toCsvValue = (value: any) => {\n    const str = value === undefined || value === null ? '' : String(value);\n    if (/[\",\\n]/.test(str)) {\n      return '\"' + str.replace(/\"/g, '\"\"') + '\"';\n    }\n    return str;\n  };\n\n  const handleDownloadQuestions = () => {\n    if (!questions || questions.length === 0) {\n      alert('다운로드할 문제가 없습니다.');\n      return;\n    }\n    if (!window.confirm('현재 문제 세트를 파일로 저장하시겠습니까?')) return;\n\n    const headers = ['type','question','score','timeLimit','options','correctAnswer'];\n    const rows = questions.map(q => {\n      const options = Array.isArray(q.options) ? JSON.stringify(q.options) : '';\n      return [\n        q.type,\n        q.question,\n        typeof q.score === 'number' ? q.score : 10,\n        typeof q.timeLimit === 'number' ? q.timeLimit : gameSettings.timeLimit,\n        options,\n        q.correctAnswer\n      ];\n    });\n    const csv = [headers.map(toCsvValue).join(','), ...rows.map(r => r.map(toCsvValue).join(','))].join('\\n');\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    const date = new Date().toISOString().slice(0,10);\n    a.download = `goldenbell_questions_${room?.code || 'room'}_${date}.csv`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  const handleUploadClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const parseCsv = (text: string): string[][] => {\n    const rows: string[][] = [];\n    let cur: string[] = [];\n    let val = '';\n    let inQuotes = false;\n    for (let i = 0; i < text.length; i++) {\n      const ch = text[i];\n      if (inQuotes) {\n        if (ch === '\"') {\n          if (text[i+1] === '\"') { val += '\"'; i++; }\n          else { inQuotes = false; }\n        } else {\n          val += ch;\n        }\n      } else {\n        if (ch === '\"') { inQuotes = true; }\n        else if (ch === ',') { cur.push(val); val = ''; }\n        else if (ch === '\\n' || ch === '\\r') {\n          if (val !== '' || cur.length > 0) { cur.push(val); rows.push(cur); cur = []; val = ''; }\n          // handle \\r\\n by skipping next if needed\n          if (ch === '\\r' && text[i+1] === '\\n') i++;\n        } else { val += ch; }\n      }\n    }\n    if (val !== '' || cur.length > 0) { cur.push(val); rows.push(cur); }\n    return rows.filter(r => r.some(c => String(c).trim() !== ''));\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = () => {\n      try {\n        const text = String(reader.result || '');\n        const rows = parseCsv(text);\n        if (rows.length === 0) throw new Error('빈 파일');\n        const header = rows[0].map(h => h.trim());\n        const colIndex = (name: string) => header.findIndex(h => h.toLowerCase() === name.toLowerCase());\n        const idx = {\n          type: colIndex('type'),\n          question: colIndex('question'),\n          score: colIndex('score'),\n          timeLimit: colIndex('timeLimit'),\n          options: colIndex('options'),\n          correctAnswer: colIndex('correctAnswer')\n        } as const;\n        const missing = Object.entries(idx).filter(([,v]) => v < 0).map(([k]) => k);\n        if (missing.length) throw new Error('누락된 컬럼: ' + missing.join(', '));\n\n        const imported: Question[] = rows.slice(1).map((r) => {\n          const rawType = r[idx.type] || '';\n          const type = (String(rawType).toLowerCase() as QuestionType);\n          const question = r[idx.question] || '';\n          const score = parseInt(String(r[idx.score] || '10')) || 10;\n          const timeLimit = parseInt(String(r[idx.timeLimit] || String(gameSettings.timeLimit))) || gameSettings.timeLimit;\n          let options: string[] | undefined;\n          const rawOptions = r[idx.options];\n          if (rawOptions) {\n            try { options = JSON.parse(rawOptions); }\n            catch { options = String(rawOptions).split('|').map(s => s.trim()).filter(Boolean); }\n          }\n          const rawCorrect = r[idx.correctAnswer];\n          let correctAnswer: string | number = rawCorrect ?? '';\n          if (type === 'multiple' && options && options.length) {\n            const num = Number(correctAnswer);\n            if (!isNaN(num)) correctAnswer = num; else {\n              const found = options.findIndex(o => String(o) === String(correctAnswer));\n              correctAnswer = found >= 0 ? found : 0;\n            }\n          }\n          return {\n            id: 'q_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6),\n            type,\n            question,\n            score,\n            timeLimit,\n            options,\n            correctAnswer\n          } as Question;\n        }).filter(q => q.question && q.type);\n\n        if (imported.length === 0) throw new Error('유효한 문제가 없습니다.');\n\n        if (!window.confirm(`현재 문제를 ${imported.length}개의 항목으로 교체하시겠습니까?`)) return;\n        actions.reorderQuestions(imported);\n        alert(`문제 ${imported.length}개를 불러왔습니다.`);\n      } catch (err: any) {\n        console.error('문제 업로드 실패:', err);\n        alert('업로드에 실패했습니다: ' + (err?.message || String(err)));\n      } finally {\n        e.target.value = '';\n      }\n    };\n    reader.readAsText(file, 'utf-8');\n  };\n\n  const handleOpenGameHost = () => {\n    // 새 탭에서 진행 페이지 열기\n    window.open('/game-host', '_blank');\n  };\n\n  const handleBackToMain = () => {\n    // 방 삭제 후 메인으로 이동\n    if (room) {\n      roomManager.deleteRoom(room.code);\n    }\n    actions.resetGame();\n    navigate('/');\n  };\n\n  const handleQuestionSubmit = (question: Omit<Question, 'id'>) => {\n    const newQuestion: Question = {\n      id: 'q_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6),\n      ...question,\n    };\n    actions.addQuestion(newQuestion);\n    setShowQuestionModal(false);\n  };\n\n  if (!room) {\n    return (\n      <div className=\"admin-panel\">\n        <div className=\"loading-message\">\n          <h2>방 정보를 불러오는 중...</h2>\n          <p>잠시만 기다려주세요.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"admin-panel\">\n      <header className=\"admin-header\">\n        <button className=\"back-btn\" onClick={handleBackToMain}>\n          ← 뒤로가기\n        </button>\n        <div className=\"room-info\">\n          <h1>골든벨 관리자</h1>\n          <div className=\"room-details\">\n            <span className=\"room-code\">방 코드: <strong>{room.code}</strong></span>\n            <span className=\"room-subject\">주제: {room.subject}</span>\n            <span className=\"room-type\">\n              {room.isPublic ? '🌐 공개방' : '🔒 비공개방'}\n            </span>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"admin-content\">\n        <button \n          className=\"open-host-floating\" \n          onClick={handleOpenGameHost}\n          disabled={!room}\n        >\n          진행페이지 열기\n        </button>\n        <div className=\"left-panel\">\n          <div className=\"control-section\">\n            <h3>게임 제어</h3>\n            <div className=\"control-buttons\">\n              {/* 시작 / 일시정지 / 넘어가기 / 종료 순서, 시작 전에는 일시정지/넘어가기 비활성 */}\n              <button \n                className=\"start-btn control-btn\" \n                onClick={handleStartGame}\n                disabled={questions.length === 0 || gameState === 'playing' || gameState === 'showingAnswer'}\n              >\n                {hasStarted ? '다시 시작' : '시작'}\n              </button>\n\n              <button className=\"pause-btn control-btn\" onClick={handlePauseGame} disabled={!(gameState === 'playing' || gameState === 'showingAnswer')}>\n                일시정지\n              </button>\n\n              <div className=\"time-controls\">\n                <input type=\"number\" placeholder=\"시간\" className=\"time-input\"\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter') {\n                      const v = parseInt((e.target as HTMLInputElement).value);\n                      if (!isNaN(v)) {\n                        if (gameState === 'playing' || gameState === 'showingAnswer' || gameState === 'paused') {\n                          eventBus.emit('ADJUST_TIME', v);\n                          syncManager.broadcast('ADJUST_TIME', v);\n                        }\n                        (e.target as HTMLInputElement).value = '';\n                      }\n                    }\n                  }}\n                />\n                <span className={`time-unit ${!(gameState === 'playing' || gameState === 'showingAnswer' || gameState === 'paused') ? 'disabled' : ''}`}>(초)</span>\n                <button className=\"control-btn\" onClick={() => { eventBus.emit('ADJUST_TIME', 5); syncManager.broadcast('ADJUST_TIME', 5); }} disabled={!(gameState === 'playing' || gameState === 'showingAnswer' || gameState === 'paused')}>+</button>\n                <button className=\"control-btn\" onClick={() => { eventBus.emit('ADJUST_TIME', -5); syncManager.broadcast('ADJUST_TIME', -5); }} disabled={!(gameState === 'playing' || gameState === 'showingAnswer' || gameState === 'paused')}>-</button>\n              </div>\n\n              <button className=\"submit-btn control-btn\" onClick={() => {\n                if (gameState === 'playing') {\n                  actions.showAnswer();\n                } else if (gameState === 'showingAnswer') {\n                  actions.nextQuestion();\n                }\n              }} disabled={!(gameState === 'playing' || gameState === 'showingAnswer')}>\n                넘어가기\n              </button>\n\n              <button className=\"control-btn\" onClick={() => actions.endGame()}>\n                종료\n              </button>\n\n              <button \n                className=\"leaderboard-btn\" \n                onClick={handleShowLeaderboard}\n              >\n                순위\n              </button>\n            </div>\n          </div>\n\n          {/* 실시간 참여자 현황 */}\n          <div className=\"participants-section\">\n            <h3>실시간 참여자 현황</h3>\n            {players.length === 0 ? (\n              <div className=\"no-participants\">\n                <p>🎯 아직 참여자가 없습니다</p>\n                <small>방 코드: <strong>{room.code}</strong>를 공유해주세요</small>\n              </div>\n            ) : (\n              <div className=\"participants-list\">\n                {players.map(player => (\n                  <div key={player.id} className=\"participant-item\">\n                    <div className=\"participant-avatar\">\n                      <Avatar {...player.avatar} />\n                    </div>\n                    <div className=\"participant-info\">\n                      <span className=\"participant-name\">{player.nickname}</span>\n                      <span className=\"participant-team\">\n                        {player.team || '개인'} {player.team ? '팀' : ''}\n                      </span>\n                      <span className=\"participant-status\">\n                        {player.isEliminated ? '❌ 탈락' : '✅ 참여중'}\n                      </span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"right-panel\">\n          <div className=\"questions-section\">\n            <div className=\"questions-header\">\n              <h3>문제 관리</h3>\n              <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\n                <button \n                  className=\"btn-primary add-question-btn\"\n                  onClick={() => setShowQuestionModal(true)}\n                >\n                  + 문제 추가\n                </button>\n                <button \n                  className=\"btn-primary add-question-btn ai-add-btn\"\n                  onClick={() => setShowAiModal(true)}\n                >\n                  AI 문제 추가\n                </button>\n                <button \n                  className=\"btn-primary\"\n                  onClick={handleDownloadQuestions}\n                >\n                  문제 다운로드(CSV)\n                </button>\n                <button \n                  className=\"btn-primary\"\n                  onClick={handleUploadClick}\n                >\n                  문제 업로드(CSV)\n                </button>\n                <input ref={fileInputRef} type=\"file\" accept=\".csv\" style={{ display: 'none' }} onChange={handleFileChange} />\n              </div>\n            </div>\n            \n            <QuestionStack\n              questions={questions}\n              onDelete={handleDeleteQuestion}\n              onReorder={handleReorderQuestions}\n              currentIndex={currentQuestionIndex}\n              gameState={gameState}\n              hasStarted={hasStarted}\n            />\n          </div>\n\n          <div className=\"settings-section\">\n            <h3>타이머 설정</h3>\n            <div className=\"setting-group\">\n              <label>문제 시간(초)</label>\n              <input\n                type=\"number\"\n                value={gameSettings.timeLimit}\n                min={1}\n                max={300}\n                onChange={(e) => handleGameSettingsChange({ timeLimit: parseInt(e.target.value) || 1 })}\n              />\n              <small>문제가 공개되는 시간입니다.</small>\n            </div>\n            <div className=\"setting-group\">\n              <label>정답 공개 시간(초)</label>\n              <input\n                type=\"number\"\n                value={gameSettings.answerRevealTime}\n                min={1}\n                max={120}\n                onChange={(e) => handleGameSettingsChange({ answerRevealTime: parseInt(e.target.value) || 1 })}\n              />\n              <small>정답을 공개하는 시간입니다.</small>\n            </div>\n            <div className=\"checkbox-group\">\n              <label className=\"checkbox-label\">\n                <input\n                  type=\"checkbox\"\n                  checked={!gameSettings.autoMode}\n                  onChange={(e) => handleGameSettingsChange({ autoMode: !e.target.checked })}\n                />\n                수동 모드\n              </label>\n              <small>수동 모드는 다음 단계로 넘어갈 때 직접 ‘넘어가기’를 눌러야 합니다.</small>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {showQuestionModal && (\n        <QuestionModal\n          onSubmit={handleQuestionSubmit}\n          onClose={() => setShowQuestionModal(false)}\n        />\n      )}\n      {showAiModal && (\n        <AiQuestionModal\n          onClose={() => setShowAiModal(false)}\n          onGenerate={(list: AiQuestion[]) => {\n            console.info('[AI_GEN_WIRE] 수신 항목 수', list.length);\n            const mapped = list.map(q => ({\n              id: q.id || 'q_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6),\n              type: q.type as QuestionType,\n              question: q.question,\n              score: typeof q.score === 'number' ? q.score : 10,\n              timeLimit: gameSettings.timeLimit,\n              options: q.options,\n              correctAnswer: q.correctAnswer,\n            })) as any[];\n            actions.addQuestionsBulk(mapped as any);\n            setShowAiModal(false);\n          }}\n        />\n      )}\n      {showLeaderboard && (\n        <LeaderboardModal onClose={() => setShowLeaderboard(false)} />\n      )}\n    </div>\n  );\n};\n\nexport default NewAdminPanel;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}