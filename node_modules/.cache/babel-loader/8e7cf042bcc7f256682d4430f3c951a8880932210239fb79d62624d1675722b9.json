{"ast":null,"code":"/**\r\n * ÎèÖÎ¶ΩÏ†ÅÏù∏ ÎèôÍ∏∞Ìôî Îß§ÎãàÏ†Ä\r\n * Î∏åÎùºÏö∞Ï†Ä Í∞Ñ, ÌÉ≠ Í∞Ñ Ïã§ÏãúÍ∞Ñ ÎèôÍ∏∞ÌôîÎ•º Îã¥Îãπ\r\n */\n\nclass SyncManager {\n  constructor() {\n    this.channel = void 0;\n    this.sessionId = void 0;\n    this.listeners = new Map();\n    this.gameData = void 0;\n    this.sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n    this.channel = new BroadcastChannel('golden_bell_sync');\n    this.gameData = this.getInitialGameData();\n    this.setupChannelListener();\n    this.startHeartbeat();\n    console.log('üîÑ SyncManager Ï¥àÍ∏∞ÌôîÎê® - SessionID:', this.sessionId);\n  }\n  getInitialGameData() {\n    const saved = localStorage.getItem('gameData');\n    if (saved) {\n      try {\n        return JSON.parse(saved);\n      } catch (e) {\n        console.warn('Ï†ÄÏû•Îêú Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\n      }\n    }\n    return {\n      room: null,\n      players: [],\n      questions: [],\n      gameState: 'waiting',\n      currentQuestionIndex: 0,\n      lastUpdated: Date.now()\n    };\n  }\n  setupChannelListener() {\n    this.channel.addEventListener('message', event => {\n      const syncEvent = event.data;\n\n      // ÏûêÏã†Ïù¥ Î≥¥ÎÇ∏ Ïù¥Î≤§Ìä∏Îäî Î¨¥Ïãú\n      if (syncEvent.source === this.sessionId) return;\n      console.log('üì° ÎèôÍ∏∞Ìôî Ïù¥Î≤§Ìä∏ ÏàòÏã†:', syncEvent.type, syncEvent.payload);\n      this.handleSyncEvent(syncEvent);\n    });\n  }\n  handleSyncEvent(event) {\n    switch (event.type) {\n      case 'GAME_DATA_UPDATE':\n        this.updateGameData(event.payload, false);\n        break;\n      case 'ROOM_DELETED':\n        {\n          const deletedCode = event.payload;\n          if (this.gameData.room && this.gameData.room.code === deletedCode) {\n            // ÌòÑÏû¨ Î∞©Ïù¥ ÏÇ≠Ï†úÎêòÎ©¥ Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî\n            this.gameData = this.getInitialGameData();\n            this.saveGameData();\n            this.notifyListeners('GAME_DATA_UPDATE', this.gameData);\n            console.log('üßπ Î∞© ÏÇ≠Ï†úÎ°ú Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî:', deletedCode);\n          }\n          break;\n        }\n      case 'PLAYER_JOIN':\n        this.handlePlayerJoin(event.payload);\n        break;\n      case 'PLAYER_LEAVE':\n        this.handlePlayerLeave(event.payload);\n        break;\n      case 'GAME_STATE_CHANGE':\n        this.handleGameStateChange(event.payload);\n        break;\n      case 'HEARTBEAT':\n        this.handleHeartbeat(event.payload);\n        break;\n    }\n    this.notifyListeners(event.type, event.payload);\n  }\n  handlePlayerJoin(player) {\n    if (!this.gameData.players.find(p => p.id === player.id)) {\n      this.gameData.players.push(player);\n      this.gameData.lastUpdated = Date.now();\n      this.saveGameData();\n      console.log('üë§ ÌîåÎ†àÏù¥Ïñ¥ Ï∞∏Ïó¨:', player.nickname);\n    }\n  }\n  handlePlayerLeave(playerId) {\n    this.gameData.players = this.gameData.players.filter(p => p.id !== playerId);\n    this.gameData.lastUpdated = Date.now();\n    this.saveGameData();\n    console.log('üë§ ÌîåÎ†àÏù¥Ïñ¥ Ìá¥Ïû•:', playerId);\n  }\n  handleGameStateChange(newState) {\n    Object.assign(this.gameData, newState);\n    this.gameData.lastUpdated = Date.now();\n    this.saveGameData();\n    console.log('üéÆ Í≤åÏûÑ ÏÉÅÌÉú Î≥ÄÍ≤Ω:', newState);\n  }\n  handleHeartbeat(data) {\n    // ÌïòÌä∏ÎπÑÌä∏ Ï≤òÎ¶¨ (ÌïÑÏöîÏãú Íµ¨ÌòÑ)\n  }\n  startHeartbeat() {\n    setInterval(() => {\n      this.broadcast('HEARTBEAT', {\n        sessionId: this.sessionId,\n        timestamp: Date.now()\n      });\n    }, 5000);\n  }\n  broadcast(type, payload) {\n    const event = {\n      type,\n      payload,\n      timestamp: Date.now(),\n      source: this.sessionId\n    };\n    this.channel.postMessage(event);\n    console.log('üì§ ÎèôÍ∏∞Ìôî Ïù¥Î≤§Ìä∏ Ï†ÑÏÜ°:', type, payload);\n  }\n  updateGameData(newData, broadcast = true) {\n    Object.assign(this.gameData, newData);\n    this.gameData.lastUpdated = Date.now();\n    this.saveGameData();\n    if (broadcast) {\n      this.broadcast('GAME_DATA_UPDATE', newData);\n    }\n    this.notifyListeners('GAME_DATA_UPDATE', this.gameData);\n  }\n  getGameData() {\n    return {\n      ...this.gameData\n    };\n  }\n  addPlayer(player) {\n    if (!this.gameData.players.find(p => p.id === player.id)) {\n      this.gameData.players.push(player);\n      this.gameData.lastUpdated = Date.now();\n      this.saveGameData();\n      this.broadcast('PLAYER_JOIN', player);\n      this.notifyListeners('PLAYER_JOIN', player);\n    }\n  }\n  removePlayer(playerId) {\n    this.gameData.players = this.gameData.players.filter(p => p.id !== playerId);\n    this.gameData.lastUpdated = Date.now();\n    this.saveGameData();\n    this.broadcast('PLAYER_LEAVE', playerId);\n    this.notifyListeners('PLAYER_LEAVE', playerId);\n  }\n  updateGameState(changes) {\n    Object.assign(this.gameData, changes);\n    this.gameData.lastUpdated = Date.now();\n    this.saveGameData();\n    this.broadcast('GAME_STATE_CHANGE', changes);\n    this.notifyListeners('GAME_STATE_CHANGE', this.gameData);\n  }\n  saveGameData() {\n    try {\n      localStorage.setItem('gameData', JSON.stringify(this.gameData));\n    } catch (e) {\n      console.error('Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû• Ïã§Ìå®:', e);\n    }\n  }\n  addEventListener(eventType, callback) {\n    if (!this.listeners.has(eventType)) {\n      this.listeners.set(eventType, new Set());\n    }\n    this.listeners.get(eventType).add(callback);\n  }\n  removeEventListener(eventType, callback) {\n    if (this.listeners.has(eventType)) {\n      this.listeners.get(eventType).delete(callback);\n    }\n  }\n  notifyListeners(eventType, data) {\n    if (this.listeners.has(eventType)) {\n      this.listeners.get(eventType).forEach(callback => {\n        try {\n          callback(data);\n        } catch (e) {\n          console.error('Î¶¨Ïä§ÎÑà ÏΩúÎ∞± ÏóêÎü¨:', e);\n        }\n      });\n    }\n  }\n  destroy() {\n    this.channel.close();\n    this.listeners.clear();\n    console.log('üîÑ SyncManager Ï¢ÖÎ£åÎê®');\n  }\n}\n\n// Ïã±Í∏ÄÌÜ§ Ïù∏Ïä§ÌÑ¥Ïä§\nexport const syncManager = new SyncManager();\nexport default syncManager;","map":{"version":3,"names":["SyncManager","constructor","channel","sessionId","listeners","Map","gameData","Date","now","Math","random","toString","substr","BroadcastChannel","getInitialGameData","setupChannelListener","startHeartbeat","console","log","saved","localStorage","getItem","JSON","parse","e","warn","room","players","questions","gameState","currentQuestionIndex","lastUpdated","addEventListener","event","syncEvent","data","source","type","payload","handleSyncEvent","updateGameData","deletedCode","code","saveGameData","notifyListeners","handlePlayerJoin","handlePlayerLeave","handleGameStateChange","handleHeartbeat","player","find","p","id","push","nickname","playerId","filter","newState","Object","assign","setInterval","broadcast","timestamp","postMessage","newData","getGameData","addPlayer","removePlayer","updateGameState","changes","setItem","stringify","error","eventType","callback","has","set","Set","get","add","removeEventListener","delete","forEach","destroy","close","clear","syncManager"],"sources":["C:/Users/9204r/.cursor/avatar/src/services/SyncManager.ts"],"sourcesContent":["/**\r\n * ÎèÖÎ¶ΩÏ†ÅÏù∏ ÎèôÍ∏∞Ìôî Îß§ÎãàÏ†Ä\r\n * Î∏åÎùºÏö∞Ï†Ä Í∞Ñ, ÌÉ≠ Í∞Ñ Ïã§ÏãúÍ∞Ñ ÎèôÍ∏∞ÌôîÎ•º Îã¥Îãπ\r\n */\r\n\r\nimport { Room, Player, Question, GameState } from '../types/game';\r\n\r\nexport interface SyncEvent {\r\n  type: string;\r\n  payload: any;\r\n  timestamp: number;\r\n  source: string;\r\n}\r\n\r\nexport interface GameSyncData {\r\n  room: Room | null;\r\n  players: Player[];\r\n  questions: Question[];\r\n  gameState: GameState;\r\n  currentQuestionIndex: number;\r\n  lastUpdated: number;\r\n}\r\n\r\nclass SyncManager {\r\n  private channel: BroadcastChannel;\r\n  private sessionId: string;\r\n  private listeners: Map<string, Set<Function>> = new Map();\r\n  private gameData: GameSyncData;\r\n\r\n  constructor() {\r\n    this.sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\r\n    this.channel = new BroadcastChannel('golden_bell_sync');\r\n    this.gameData = this.getInitialGameData();\r\n    \r\n    this.setupChannelListener();\r\n    this.startHeartbeat();\r\n    \r\n    console.log('üîÑ SyncManager Ï¥àÍ∏∞ÌôîÎê® - SessionID:', this.sessionId);\r\n  }\r\n\r\n  private getInitialGameData(): GameSyncData {\r\n    const saved = localStorage.getItem('gameData');\r\n    if (saved) {\r\n      try {\r\n        return JSON.parse(saved);\r\n      } catch (e) {\r\n        console.warn('Ï†ÄÏû•Îêú Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïã§Ìå®:', e);\r\n      }\r\n    }\r\n    \r\n    return {\r\n      room: null,\r\n      players: [],\r\n      questions: [],\r\n      gameState: 'waiting',\r\n      currentQuestionIndex: 0,\r\n      lastUpdated: Date.now()\r\n    };\r\n  }\r\n\r\n  private setupChannelListener() {\r\n    this.channel.addEventListener('message', (event) => {\r\n      const syncEvent: SyncEvent = event.data;\r\n      \r\n      // ÏûêÏã†Ïù¥ Î≥¥ÎÇ∏ Ïù¥Î≤§Ìä∏Îäî Î¨¥Ïãú\r\n      if (syncEvent.source === this.sessionId) return;\r\n      \r\n      console.log('üì° ÎèôÍ∏∞Ìôî Ïù¥Î≤§Ìä∏ ÏàòÏã†:', syncEvent.type, syncEvent.payload);\r\n      \r\n      this.handleSyncEvent(syncEvent);\r\n    });\r\n  }\r\n\r\n  private handleSyncEvent(event: SyncEvent) {\r\n    switch (event.type) {\r\n      case 'GAME_DATA_UPDATE':\r\n        this.updateGameData(event.payload, false);\r\n        break;\r\n      case 'ROOM_DELETED': {\r\n        const deletedCode = event.payload as string;\r\n        if (this.gameData.room && this.gameData.room.code === deletedCode) {\r\n          // ÌòÑÏû¨ Î∞©Ïù¥ ÏÇ≠Ï†úÎêòÎ©¥ Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî\r\n          this.gameData = this.getInitialGameData();\r\n          this.saveGameData();\r\n          this.notifyListeners('GAME_DATA_UPDATE', this.gameData);\r\n          console.log('üßπ Î∞© ÏÇ≠Ï†úÎ°ú Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî:', deletedCode);\r\n        }\r\n        break;\r\n      }\r\n      case 'PLAYER_JOIN':\r\n        this.handlePlayerJoin(event.payload);\r\n        break;\r\n      case 'PLAYER_LEAVE':\r\n        this.handlePlayerLeave(event.payload);\r\n        break;\r\n      case 'GAME_STATE_CHANGE':\r\n        this.handleGameStateChange(event.payload);\r\n        break;\r\n      case 'HEARTBEAT':\r\n        this.handleHeartbeat(event.payload);\r\n        break;\r\n    }\r\n    \r\n    this.notifyListeners(event.type, event.payload);\r\n  }\r\n\r\n  private handlePlayerJoin(player: Player) {\r\n    if (!this.gameData.players.find(p => p.id === player.id)) {\r\n      this.gameData.players.push(player);\r\n      this.gameData.lastUpdated = Date.now();\r\n      this.saveGameData();\r\n      \r\n      console.log('üë§ ÌîåÎ†àÏù¥Ïñ¥ Ï∞∏Ïó¨:', player.nickname);\r\n    }\r\n  }\r\n\r\n  private handlePlayerLeave(playerId: string) {\r\n    this.gameData.players = this.gameData.players.filter(p => p.id !== playerId);\r\n    this.gameData.lastUpdated = Date.now();\r\n    this.saveGameData();\r\n    \r\n    console.log('üë§ ÌîåÎ†àÏù¥Ïñ¥ Ìá¥Ïû•:', playerId);\r\n  }\r\n\r\n  private handleGameStateChange(newState: Partial<GameSyncData>) {\r\n    Object.assign(this.gameData, newState);\r\n    this.gameData.lastUpdated = Date.now();\r\n    this.saveGameData();\r\n    \r\n    console.log('üéÆ Í≤åÏûÑ ÏÉÅÌÉú Î≥ÄÍ≤Ω:', newState);\r\n  }\r\n\r\n  private handleHeartbeat(data: { sessionId: string; timestamp: number }) {\r\n    // ÌïòÌä∏ÎπÑÌä∏ Ï≤òÎ¶¨ (ÌïÑÏöîÏãú Íµ¨ÌòÑ)\r\n  }\r\n\r\n  private startHeartbeat() {\r\n    setInterval(() => {\r\n      this.broadcast('HEARTBEAT', {\r\n        sessionId: this.sessionId,\r\n        timestamp: Date.now()\r\n      });\r\n    }, 5000);\r\n  }\r\n\r\n  public broadcast(type: string, payload: any) {\r\n    const event: SyncEvent = {\r\n      type,\r\n      payload,\r\n      timestamp: Date.now(),\r\n      source: this.sessionId\r\n    };\r\n    \r\n    this.channel.postMessage(event);\r\n    console.log('üì§ ÎèôÍ∏∞Ìôî Ïù¥Î≤§Ìä∏ Ï†ÑÏÜ°:', type, payload);\r\n  }\r\n\r\n  public updateGameData(newData: Partial<GameSyncData>, broadcast = true) {\r\n    Object.assign(this.gameData, newData);\r\n    this.gameData.lastUpdated = Date.now();\r\n    this.saveGameData();\r\n    \r\n    if (broadcast) {\r\n      this.broadcast('GAME_DATA_UPDATE', newData);\r\n    }\r\n    \r\n    this.notifyListeners('GAME_DATA_UPDATE', this.gameData);\r\n  }\r\n\r\n  public getGameData(): GameSyncData {\r\n    return { ...this.gameData };\r\n  }\r\n\r\n  public addPlayer(player: Player) {\r\n    if (!this.gameData.players.find(p => p.id === player.id)) {\r\n      this.gameData.players.push(player);\r\n      this.gameData.lastUpdated = Date.now();\r\n      this.saveGameData();\r\n      \r\n      this.broadcast('PLAYER_JOIN', player);\r\n      this.notifyListeners('PLAYER_JOIN', player);\r\n    }\r\n  }\r\n\r\n  public removePlayer(playerId: string) {\r\n    this.gameData.players = this.gameData.players.filter(p => p.id !== playerId);\r\n    this.gameData.lastUpdated = Date.now();\r\n    this.saveGameData();\r\n    \r\n    this.broadcast('PLAYER_LEAVE', playerId);\r\n    this.notifyListeners('PLAYER_LEAVE', playerId);\r\n  }\r\n\r\n  public updateGameState(changes: Partial<GameSyncData>) {\r\n    Object.assign(this.gameData, changes);\r\n    this.gameData.lastUpdated = Date.now();\r\n    this.saveGameData();\r\n    \r\n    this.broadcast('GAME_STATE_CHANGE', changes);\r\n    this.notifyListeners('GAME_STATE_CHANGE', this.gameData);\r\n  }\r\n\r\n  private saveGameData() {\r\n    try {\r\n      localStorage.setItem('gameData', JSON.stringify(this.gameData));\r\n    } catch (e) {\r\n      console.error('Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû• Ïã§Ìå®:', e);\r\n    }\r\n  }\r\n\r\n  public addEventListener(eventType: string, callback: Function) {\r\n    if (!this.listeners.has(eventType)) {\r\n      this.listeners.set(eventType, new Set());\r\n    }\r\n    this.listeners.get(eventType)!.add(callback);\r\n  }\r\n\r\n  public removeEventListener(eventType: string, callback: Function) {\r\n    if (this.listeners.has(eventType)) {\r\n      this.listeners.get(eventType)!.delete(callback);\r\n    }\r\n  }\r\n\r\n  private notifyListeners(eventType: string, data: any) {\r\n    if (this.listeners.has(eventType)) {\r\n      this.listeners.get(eventType)!.forEach(callback => {\r\n        try {\r\n          callback(data);\r\n        } catch (e) {\r\n          console.error('Î¶¨Ïä§ÎÑà ÏΩúÎ∞± ÏóêÎü¨:', e);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  public destroy() {\r\n    this.channel.close();\r\n    this.listeners.clear();\r\n    console.log('üîÑ SyncManager Ï¢ÖÎ£åÎê®');\r\n  }\r\n}\r\n\r\n// Ïã±Í∏ÄÌÜ§ Ïù∏Ïä§ÌÑ¥Ïä§\r\nexport const syncManager = new SyncManager();\r\nexport default syncManager;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}