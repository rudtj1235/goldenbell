{"ast":null,"code":"const KEY_STORAGE = 'gemini_api_key';\nexport const setGeminiKey = k => {\n  localStorage.setItem(KEY_STORAGE, (k || '').trim());\n};\nexport const getGeminiKey = () => {\n  return localStorage.getItem(KEY_STORAGE) || '';\n};\nexport async function generateQuestionsWithGemini(prompt, count = 10) {\n  var _data$candidates, _data$candidates$, _data$candidates$$con, _data$candidates$$con2, _data$candidates$$con3;\n  const apiKey = getGeminiKey();\n  if (!apiKey) throw new Error('Gemini API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤.');\n  const model = 'gemini-1.5-flash';\n\n  // 2022 êµìœ¡ê³¼ì • ì¤€ìˆ˜ + ëª¨í˜¸ì–´(ì†Œìˆ˜) í•´ì„ ê·œì¹™ + ê°œìˆ˜ ê°•ì œ\n  const sys = `ì—­í• : ë‹¹ì‹ ì€ ëŒ€í•œë¯¼êµ­ \"2022 ê°œì • êµìœ¡ê³¼ì •\" ê¸°ë°˜ì˜ í•™ìŠµìš© ë¬¸ì œ ì œìž‘ìžìž…ë‹ˆë‹¤.\nê·œì¹™:\n- ë°˜ë“œì‹œ \"2022 ê°œì • êµìœ¡ê³¼ì •\"ì˜ ì„±ì·¨ê¸°ì¤€/í•™ë…„ ì í•©ì„±ì„ ì¤€ìˆ˜í•´ ì¶œì œí•˜ì„¸ìš”.\n- ì‚¬ìš©ìžì˜ ìš”ì²­(í•™ë…„/ì£¼ì œ/í˜•ì‹/ê°œìˆ˜)ì„ í•´ì„í•´ ì ì ˆí•œ ë‚œì´ë„ì™€ í‘œí˜„ìœ¼ë¡œ í•œêµ­ì–´ ë¬¸ì œë¥¼ ë§Œë“­ë‹ˆë‹¤.\n- \"ì†Œìˆ˜\"ê°€ ì´ˆë“± ë§¥ë½ì´ë©´ ê¸°ë³¸ì ìœ¼ë¡œ \"ì†Œìˆ˜(Decimal, ì†Œìˆ˜ì )\"ë¡œ í•´ì„í•˜ì„¸ìš”. \"ì†Œìˆ˜(Prime)\"ê°€ í•„ìš”í•˜ë©´ ìš”ì²­ì— 'ì†Œìˆ˜(ì†Œìˆ˜: prime)'ì²˜ëŸ¼ ë¶„ëª…ížˆ ëª…ì‹œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.\n- ì¶œë ¥ì€ ì•„ëž˜ JSON ë°°ì—´ë§Œ í—ˆìš©(ì„¤ëª…/ì½”ë“œë¸”ë¡/ì¶”ê°€ ë¬¸ìž¥ ê¸ˆì§€).\n- ê° í•­ëª©ì€ { \"type\":\"ox|multiple|short\", \"question\":\"...\", \"options\":[...], \"correctAnswer\":\"...|index\", \"score\":10 } í˜•íƒœ.\n  * multipleì€ options í•„ìˆ˜, correctAnswerëŠ” 0ë¶€í„° ì‹œìž‘í•˜ëŠ” ì •ë‹µ index\n  * oxëŠ” options ì—†ì´ correctAnswerëŠ” \"O\" ë˜ëŠ” \"X\"\n  * shortëŠ” correctAnswerëŠ” ë¬¸ìžì—´ ì •ë‹µ\n- ë¬¸ìžì—´ ë‚´ ê°œí–‰/ë”°ì˜´í‘œëŠ” ì´ìŠ¤ì¼€ì´í”„ ì²˜ë¦¬\n- ë°˜ë“œì‹œ length=${count} ì •í™•ížˆ ë§žì¶”ì„¸ìš”.`;\n  const user = `ì‚¬ìš©ìž ìš”ì²­: ${prompt}\\nì›í•˜ëŠ” ê°œìˆ˜: ${count}\\nì¶œë ¥ í˜•ì‹: ìœ„ JSON ë°°ì—´ë§Œ ë°˜í™˜`;\n  const responseSchema = {\n    type: 'ARRAY',\n    items: {\n      type: 'OBJECT',\n      properties: {\n        id: {\n          type: 'STRING'\n        },\n        type: {\n          type: 'STRING'\n        },\n        question: {\n          type: 'STRING'\n        },\n        options: {\n          type: 'ARRAY',\n          items: {\n            type: 'STRING'\n          }\n        },\n        correctAnswer: {\n          type: 'STRING'\n        },\n        score: {\n          type: 'NUMBER'\n        }\n      },\n      required: ['type', 'question', 'correctAnswer']\n    }\n  };\n  const body = {\n    contents: [{\n      role: 'user',\n      parts: [{\n        text: sys\n      }]\n    }, {\n      role: 'user',\n      parts: [{\n        text: user\n      }]\n    }],\n    generationConfig: {\n      responseMimeType: 'application/json',\n      responseSchema\n    }\n  };\n  console.info('[AI_GEN] â–¶ ìš”ì²­ ì‹œìž‘', {\n    model,\n    count,\n    prompt\n  });\n  const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${encodeURIComponent(apiKey)}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(body)\n  });\n  if (!res.ok) {\n    console.warn('[AI_GEN] âœ– ì‘ë‹µ ì‹¤íŒ¨', {\n      status: res.status,\n      statusText: res.statusText\n    });\n    throw new Error('Gemini í˜¸ì¶œ ì‹¤íŒ¨');\n  }\n  const data = await res.json();\n  let text = (data === null || data === void 0 ? void 0 : (_data$candidates = data.candidates) === null || _data$candidates === void 0 ? void 0 : (_data$candidates$ = _data$candidates[0]) === null || _data$candidates$ === void 0 ? void 0 : (_data$candidates$$con = _data$candidates$.content) === null || _data$candidates$$con === void 0 ? void 0 : (_data$candidates$$con2 = _data$candidates$$con.parts) === null || _data$candidates$$con2 === void 0 ? void 0 : (_data$candidates$$con3 = _data$candidates$$con2[0]) === null || _data$candidates$$con3 === void 0 ? void 0 : _data$candidates$$con3.text) || '';\n  console.info('[AI_GEN] â—€ ì›ë¬¸ ìˆ˜ì‹ ', {\n    length: text.length,\n    preview: text.slice(0, 300)\n  });\n  // code fence ì œê±°\n  if (text.startsWith('```')) {\n    const first = text.indexOf('\\n');\n    const lastFence = text.lastIndexOf('```');\n    if (first !== -1 && lastFence !== -1) text = text.slice(first + 1, lastFence);\n  }\n  let parsed;\n  try {\n    parsed = JSON.parse(text);\n  } catch {\n    console.warn('[AI_GEN] âš  JSON íŒŒì‹± ìž¬ì‹œë„(ë¶€ë¶„ ì¶”ì¶œ)');\n    const jsonStart = text.indexOf('[');\n    const jsonEnd = text.lastIndexOf(']');\n    if (jsonStart === -1 || jsonEnd === -1) throw new Error('AI ì‘ë‹µ íŒŒì‹± ì‹¤íŒ¨');\n    parsed = JSON.parse(text.slice(jsonStart, jsonEnd + 1));\n  }\n  const arr = Array.isArray(parsed) ? parsed : [parsed];\n  console.info('[AI_GEN] âœ… íŒŒì‹± ì™„ë£Œ', {\n    returned: arr.length\n  });\n  const isValidItem = q => q && ['ox', 'multiple', 'short'].includes(q.type) && typeof q.question === 'string' && (q.type !== 'multiple' || Array.isArray(q.options));\n  let items = arr.filter(isValidItem);\n  console.info('[AI_GEN] ðŸ”Ž ìœ íš¨ í•­ëª© í•„í„°ë§', {\n    valid: items.length,\n    requested: count\n  });\n  if (items.length > count) items = items.slice(0, count);\n  if (items.length < count) {\n    console.warn('[AI_GEN] âœ– ê°œìˆ˜ ë¶€ì¡±', {\n      valid: items.length,\n      requested: count\n    });\n    throw new Error(`AIê°€ ${items.length}ê°œë§Œ ë°˜í™˜í–ˆìŠµë‹ˆë‹¤. í”„ë¡¬í”„íŠ¸ë¥¼ ì¡°ê¸ˆ ë” êµ¬ì²´ì ìœ¼ë¡œ ìž…ë ¥í•˜ê±°ë‚˜ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.`);\n  }\n  return items.map((q, i) => ({\n    id: q.id || `ai_${Date.now()}_${i}`,\n    type: q.type,\n    question: q.question,\n    options: q.options,\n    correctAnswer: q.correctAnswer,\n    score: typeof q.score === 'number' ? q.score : 10\n  }));\n}","map":{"version":3,"names":["KEY_STORAGE","setGeminiKey","k","localStorage","setItem","trim","getGeminiKey","getItem","generateQuestionsWithGemini","prompt","count","_data$candidates","_data$candidates$","_data$candidates$$con","_data$candidates$$con2","_data$candidates$$con3","apiKey","Error","model","sys","user","responseSchema","type","items","properties","id","question","options","correctAnswer","score","required","body","contents","role","parts","text","generationConfig","responseMimeType","console","info","res","fetch","encodeURIComponent","method","headers","JSON","stringify","ok","warn","status","statusText","data","json","candidates","content","length","preview","slice","startsWith","first","indexOf","lastFence","lastIndexOf","parsed","parse","jsonStart","jsonEnd","arr","Array","isArray","returned","isValidItem","q","includes","filter","valid","requested","map","i","Date","now"],"sources":["C:/Users/9204r/.cursor/avatar/src/services/ai.ts"],"sourcesContent":["export type AiQuestion = {\r\n  id?: string;\r\n  type: 'ox' | 'multiple' | 'short';\r\n  question: string;\r\n  options?: string[];\r\n  correctAnswer: string | number;\r\n  score?: number;\r\n};\r\n\r\nconst KEY_STORAGE = 'gemini_api_key';\r\n\r\nexport const setGeminiKey = (k: string) => {\r\n  localStorage.setItem(KEY_STORAGE, (k || '').trim());\r\n};\r\n\r\nexport const getGeminiKey = (): string => {\r\n  return localStorage.getItem(KEY_STORAGE) || '';\r\n};\r\n\r\nexport async function generateQuestionsWithGemini(prompt: string, count = 10): Promise<AiQuestion[]> {\r\n  const apiKey = getGeminiKey();\r\n  if (!apiKey) throw new Error('Gemini API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤.');\r\n\r\n  const model = 'gemini-1.5-flash';\r\n\r\n  // 2022 êµìœ¡ê³¼ì • ì¤€ìˆ˜ + ëª¨í˜¸ì–´(ì†Œìˆ˜) í•´ì„ ê·œì¹™ + ê°œìˆ˜ ê°•ì œ\r\n  const sys = `ì—­í• : ë‹¹ì‹ ì€ ëŒ€í•œë¯¼êµ­ \"2022 ê°œì • êµìœ¡ê³¼ì •\" ê¸°ë°˜ì˜ í•™ìŠµìš© ë¬¸ì œ ì œìž‘ìžìž…ë‹ˆë‹¤.\r\nê·œì¹™:\r\n- ë°˜ë“œì‹œ \"2022 ê°œì • êµìœ¡ê³¼ì •\"ì˜ ì„±ì·¨ê¸°ì¤€/í•™ë…„ ì í•©ì„±ì„ ì¤€ìˆ˜í•´ ì¶œì œí•˜ì„¸ìš”.\r\n- ì‚¬ìš©ìžì˜ ìš”ì²­(í•™ë…„/ì£¼ì œ/í˜•ì‹/ê°œìˆ˜)ì„ í•´ì„í•´ ì ì ˆí•œ ë‚œì´ë„ì™€ í‘œí˜„ìœ¼ë¡œ í•œêµ­ì–´ ë¬¸ì œë¥¼ ë§Œë“­ë‹ˆë‹¤.\r\n- \"ì†Œìˆ˜\"ê°€ ì´ˆë“± ë§¥ë½ì´ë©´ ê¸°ë³¸ì ìœ¼ë¡œ \"ì†Œìˆ˜(Decimal, ì†Œìˆ˜ì )\"ë¡œ í•´ì„í•˜ì„¸ìš”. \"ì†Œìˆ˜(Prime)\"ê°€ í•„ìš”í•˜ë©´ ìš”ì²­ì— 'ì†Œìˆ˜(ì†Œìˆ˜: prime)'ì²˜ëŸ¼ ë¶„ëª…ížˆ ëª…ì‹œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.\r\n- ì¶œë ¥ì€ ì•„ëž˜ JSON ë°°ì—´ë§Œ í—ˆìš©(ì„¤ëª…/ì½”ë“œë¸”ë¡/ì¶”ê°€ ë¬¸ìž¥ ê¸ˆì§€).\r\n- ê° í•­ëª©ì€ { \"type\":\"ox|multiple|short\", \"question\":\"...\", \"options\":[...], \"correctAnswer\":\"...|index\", \"score\":10 } í˜•íƒœ.\r\n  * multipleì€ options í•„ìˆ˜, correctAnswerëŠ” 0ë¶€í„° ì‹œìž‘í•˜ëŠ” ì •ë‹µ index\r\n  * oxëŠ” options ì—†ì´ correctAnswerëŠ” \"O\" ë˜ëŠ” \"X\"\r\n  * shortëŠ” correctAnswerëŠ” ë¬¸ìžì—´ ì •ë‹µ\r\n- ë¬¸ìžì—´ ë‚´ ê°œí–‰/ë”°ì˜´í‘œëŠ” ì´ìŠ¤ì¼€ì´í”„ ì²˜ë¦¬\r\n- ë°˜ë“œì‹œ length=${count} ì •í™•ížˆ ë§žì¶”ì„¸ìš”.`;\r\n\r\n  const user = `ì‚¬ìš©ìž ìš”ì²­: ${prompt}\\nì›í•˜ëŠ” ê°œìˆ˜: ${count}\\nì¶œë ¥ í˜•ì‹: ìœ„ JSON ë°°ì—´ë§Œ ë°˜í™˜`;\r\n\r\n  const responseSchema = {\r\n    type: 'ARRAY',\r\n    items: {\r\n      type: 'OBJECT',\r\n      properties: {\r\n        id: { type: 'STRING' },\r\n        type: { type: 'STRING' },\r\n        question: { type: 'STRING' },\r\n        options: { type: 'ARRAY', items: { type: 'STRING' } },\r\n        correctAnswer: { type: 'STRING' },\r\n        score: { type: 'NUMBER' }\r\n      },\r\n      required: ['type', 'question', 'correctAnswer']\r\n    }\r\n  } as any;\r\n\r\n  const body = {\r\n    contents: [\r\n      { role: 'user', parts: [{ text: sys }] },\r\n      { role: 'user', parts: [{ text: user }] }\r\n    ],\r\n    generationConfig: {\r\n      responseMimeType: 'application/json',\r\n      responseSchema\r\n    }\r\n  } as any;\r\n\r\n  console.info('[AI_GEN] â–¶ ìš”ì²­ ì‹œìž‘', { model, count, prompt });\r\n\r\n  const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${encodeURIComponent(apiKey)}` , {\r\n    method: 'POST',\r\n    headers: { 'Content-Type':'application/json' },\r\n    body: JSON.stringify(body),\r\n  });\r\n  if (!res.ok) {\r\n    console.warn('[AI_GEN] âœ– ì‘ë‹µ ì‹¤íŒ¨', { status: res.status, statusText: res.statusText });\r\n    throw new Error('Gemini í˜¸ì¶œ ì‹¤íŒ¨');\r\n  }\r\n  const data = await res.json();\r\n\r\n  let text: string = data?.candidates?.[0]?.content?.parts?.[0]?.text || '';\r\n  console.info('[AI_GEN] â—€ ì›ë¬¸ ìˆ˜ì‹ ', { length: text.length, preview: text.slice(0, 300) });\r\n  // code fence ì œê±°\r\n  if (text.startsWith('```')) {\r\n    const first = text.indexOf('\\n');\r\n    const lastFence = text.lastIndexOf('```');\r\n    if (first !== -1 && lastFence !== -1) text = text.slice(first + 1, lastFence);\r\n  }\r\n  let parsed: any;\r\n  try {\r\n    parsed = JSON.parse(text);\r\n  } catch {\r\n    console.warn('[AI_GEN] âš  JSON íŒŒì‹± ìž¬ì‹œë„(ë¶€ë¶„ ì¶”ì¶œ)');\r\n    const jsonStart = text.indexOf('[');\r\n    const jsonEnd = text.lastIndexOf(']');\r\n    if (jsonStart === -1 || jsonEnd === -1) throw new Error('AI ì‘ë‹µ íŒŒì‹± ì‹¤íŒ¨');\r\n    parsed = JSON.parse(text.slice(jsonStart, jsonEnd + 1));\r\n  }\r\n  const arr: any[] = Array.isArray(parsed) ? parsed : [parsed];\r\n  console.info('[AI_GEN] âœ… íŒŒì‹± ì™„ë£Œ', { returned: arr.length });\r\n  const isValidItem = (q: any) => q && ['ox','multiple','short'].includes(q.type) && typeof q.question === 'string' && (q.type !== 'multiple' || Array.isArray(q.options));\r\n  let items = arr.filter(isValidItem);\r\n  console.info('[AI_GEN] ðŸ”Ž ìœ íš¨ í•­ëª© í•„í„°ë§', { valid: items.length, requested: count });\r\n  if (items.length > count) items = items.slice(0, count);\r\n  if (items.length < count) {\r\n    console.warn('[AI_GEN] âœ– ê°œìˆ˜ ë¶€ì¡±', { valid: items.length, requested: count });\r\n    throw new Error(`AIê°€ ${items.length}ê°œë§Œ ë°˜í™˜í–ˆìŠµë‹ˆë‹¤. í”„ë¡¬í”„íŠ¸ë¥¼ ì¡°ê¸ˆ ë” êµ¬ì²´ì ìœ¼ë¡œ ìž…ë ¥í•˜ê±°ë‚˜ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.`);\r\n  }\r\n\r\n  return items.map((q, i) => ({\r\n    id: q.id || `ai_${Date.now()}_${i}`,\r\n    type: q.type,\r\n    question: q.question,\r\n    options: q.options,\r\n    correctAnswer: q.correctAnswer,\r\n    score: typeof q.score === 'number' ? q.score : 10,\r\n  }));\r\n}\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}